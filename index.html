<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>ËÅñË™ï‰∏äÊµ∑‰πãÊóÖ 2025</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@latest/Sortable.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Yomogi&family=Noto+Sans+SC:wght@300;400;700;900&family=Noto+Sans+TC:wght@300;400;700;900&family=Caveat:wght@700&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        // ÂõûÂæ© Mindful Palette No.162 Ê∑±Ëâ≤Á≥ªÈÖçËâ≤
                        p: { 
                            white: '#F2F3F4',    
                            beige: '#DED1C6',    // ÂâØËâ≤ (Á±≥Êùè)
                            mauve: '#A77693',    // ‰∏ªËâ≤ (Á¥´Ëóï)
                            midBlue: '#174871',  
                            darkBlue: '#0F2D4D', // Ê∑±ËóçËÉåÊôØ
                        }
                    },
                    fontFamily: { 
                        sans: ['Noto Sans TC', 'sans-serif'],
                        hand: ['Caveat', 'cursive'], 
                        deco: ['Yomogi', 'cursive'], 
                        heiti: ['Noto Sans SC', 'Heiti SC', 'SimHei', 'sans-serif']
                    }
                }
            }
        }
    </script>
    <style>
        html, body {
            height: 100%;
            height: 100dvh;
            overflow: hidden;
            overscroll-behavior: none;
            background-color: #0F2D4D;
            color: #F2F3F4;
        }
        
        #app {
            height: 100%;
            width: 100%;
            display: flex;
            justify-content: center;
        }

        .scrollbar-hide::-webkit-scrollbar { display: none; }
        .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }
        .animate-fade-in { animation: fadeIn 0.5s cubic-bezier(0.2, 0.8, 0.2, 1) forwards; }
        .animate-spin-slow { animation: spin 12s linear infinite; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; transform: translateY(0); } }
        
        /* Ê∑±Ëâ≤ÁéªÁíÉÊì¨ÊÖã */
        .glass-card {
            background: rgba(23, 72, 113, 0.4); /* Ê∑±ËóçÂçäÈÄè */
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(222, 209, 198, 0.15); /* Á±≥ÊùèËâ≤ÂæÆÂÖâÈÇäÊ°Ü */
            box-shadow: 0 8px 32px 0 rgba(15, 45, 77, 0.3);
        }
        
        /* Â∞éËà™Âàó */
        .glass-nav {
            background: rgba(15, 45, 77, 0.8);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-top: 1px solid rgba(167, 118, 147, 0.2);
            box-shadow: 0 -10px 40px rgba(0,0,0,0.6);
        }

        .glass-deco {
            background: rgba(167, 118, 147, 0.2);
            backdrop-filter: blur(5px);
            border: 1px solid rgba(222, 209, 198, 0.3);
            box-shadow: 0 0 15px rgba(167, 118, 147, 0.3);
        }
        
        .glass-modal {
            background: rgba(15, 45, 77, 0.9);
            backdrop-filter: blur(10px);
        }

        /* ÊñáÂ≠óÁôºÂÖâ */
        .text-glow { text-shadow: 0 0 12px rgba(242, 243, 244, 0.6); }
        .text-glow-mauve { text-shadow: 0 0 12px rgba(167, 118, 147, 0.6); }
        
        /* ÊãñÊõ≥Ê®£Âºè */
        .sortable-ghost { opacity: 0.3; }
        .sortable-drag { cursor: grabbing; background: rgba(167, 118, 147, 0.3); }
    </style>
</head>
<body>
    <div id="app" class="font-sans font-medium text-p-white">
        <div class="w-full max-w-md h-full relative shadow-2xl flex flex-col overflow-hidden bg-transparent">
            
            <div class="absolute inset-0 z-0 pointer-events-none bg-gradient-to-b from-p-darkBlue to-p-midBlue">
                <div class="absolute top-[-10%] right-[-10%] w-[400px] h-[400px] bg-p-mauve/15 rounded-full blur-[90px]"></div>
                <div class="absolute bottom-[-10%] left-[-20%] w-[350px] h-[350px] bg-p-midBlue/30 rounded-full blur-[90px]"></div>
            </div>

            <header class="bg-transparent p-3 pt-4 z-10 flex justify-between items-start relative flex-shrink-0">
                <div class="relative z-10 pl-2 flex flex-col justify-center w-full">
                    <h2 class="text-[10px] tracking-widest opacity-90 text-p-beige mb-0.5 font-deco font-bold rotate-1 drop-shadow-md leading-none">Wayne & Chloe | Shanghai 2025</h2>
                    <h1 class="text-3xl font-deco tracking-tight text-white drop-shadow-lg font-bold mt-0.5 text-glow">
                        <span class="inline-block filter drop-shadow-none">üéÑ</span> ËÅñË™ï‰∏äÊµ∑‰πãÊóÖ <span class="inline-block filter drop-shadow-none">‚ú®</span>
                    </h1>
                </div>
                <div class="w-9 h-9 glass-deco rounded-full flex items-center justify-center shadow-inner flex-shrink-0 mr-2">
                    <i class="fa-solid fa-plane-up text-p-beige animate-bounce text-xs"></i>
                </div>
            </header>

            <main class="flex-1 overflow-y-auto scrollbar-hide p-5 pb-24 space-y-6 relative z-10">
                
                <div v-if="currentTab === 'flight'" class="animate-fade-in space-y-5">
                    <h3 class="text-xl font-bold text-p-white tracking-wide pl-1 border-l-4 border-p-mauve text-glow">Ëà™Áè≠Ë≥áË®ä</h3>
                    
                    <div class="glass-card rounded-3xl p-5 relative overflow-hidden group">
                        <div class="absolute top-4 left-4 bg-p-mauve text-white text-[10px] px-2 py-0.5 rounded-full font-bold tracking-widest shadow-md">ÂéªÁ®ã OUTBOUND</div>
                        <div class="mt-8 flex justify-between items-center mb-6">
                            <div class="text-center">
                                <div class="text-4xl font-black text-p-white font-heiti tracking-tighter text-glow">{{ myData.flightOut.from }}</div>
                                <div class="text-xs text-p-beige mt-1">È¶ôÊ∏Ø T1</div>
                            </div>
                            <div class="flex-1 px-4 flex flex-col items-center">
                                <div class="text-[10px] text-p-mauve mb-1">{{ myData.flightOut.airline }}</div>
                                <div class="w-full h-[1px] bg-gradient-to-r from-transparent via-p-beige/50 to-transparent relative">
                                    <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-1.5 h-1.5 bg-p-mauve rounded-full shadow-[0_0_8px_#A77693]"></div>
                                </div>
                                <div class="text-[10px] text-p-beige mt-1">{{ myData.flightOut.no }}</div>
                            </div>
                            <div class="text-center">
                                <div class="text-4xl font-black text-p-white font-heiti tracking-tighter text-glow">{{ myData.flightOut.to }}</div>
                                <div class="text-xs text-p-beige mt-1">Êµ¶Êù± T1</div>
                            </div>
                        </div>
                        <div class="flex justify-between text-sm pt-4 border-t border-p-beige/10">
                            <div><span class="text-p-beige/60 text-xs mr-2">Dep</span><span class="font-bold text-p-mauve">{{ myData.flightOut.dep }}</span></div>
                            <div><span class="text-p-beige/60 text-xs mr-2">Arr</span><span class="font-bold text-p-mauve">{{ myData.flightOut.arr }}</span></div>
                        </div>
                    </div>

                    <div class="glass-card rounded-3xl p-5 relative overflow-hidden group">
                        <div class="absolute top-4 left-4 bg-p-beige text-p-darkBlue text-[10px] px-2 py-0.5 rounded-full font-bold tracking-widest shadow-md">ÂõûÁ®ã INBOUND</div>
                        <div class="mt-8 flex justify-between items-center mb-6">
                            <div class="text-center">
                                <div class="text-4xl font-black text-p-white font-heiti tracking-tighter text-glow">{{ myData.flightIn.from }}</div>
                                <div class="text-xs text-p-beige mt-1">Êµ¶Êù± T1</div>
                            </div>
                            <div class="flex-1 px-4 flex flex-col items-center">
                                <div class="text-[10px] text-p-beige mb-1">{{ myData.flightIn.airline }}</div>
                                <div class="w-full h-[1px] bg-gradient-to-r from-transparent via-p-beige/50 to-transparent relative">
                                    <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-1.5 h-1.5 bg-p-beige rounded-full"></div>
                                </div>
                                <div class="text-[10px] text-p-beige mt-1">{{ myData.flightIn.no }}</div>
                            </div>
                            <div class="text-center">
                                <div class="text-4xl font-black text-p-white font-heiti tracking-tighter text-glow">{{ myData.flightIn.to }}</div>
                                <div class="text-xs text-p-beige mt-1">È¶ôÊ∏Ø T1</div>
                            </div>
                        </div>
                        <div class="flex justify-between text-sm pt-4 border-t border-p-beige/10">
                            <div><span class="text-p-beige/60 text-xs mr-2">Dep</span><span class="font-bold text-p-white">{{ myData.flightIn.dep }}</span></div>
                            <div><span class="text-p-beige/60 text-xs mr-2">Arr</span><span class="font-bold text-p-white">{{ myData.flightIn.arr }}</span></div>
                        </div>
                    </div>
                </div>

                <div v-if="currentTab === 'schedule'" class="animate-fade-in space-y-6">
                    <div class="flex overflow-x-auto space-x-3 pb-2 scrollbar-hide px-1">
                        <button v-for="(day, index) in myData.days" :key="index" @click="currentDayIndex = index" 
                            :class="currentDayIndex === index ? 'bg-p-mauve text-white shadow-lg shadow-p-mauve/30 border-transparent' : 'glass-card text-p-beige border-p-beige/20'"
                            class="flex-shrink-0 px-5 py-3 rounded-2xl flex flex-col items-center min-w-[70px] transition-all duration-300">
                            <span class="text-[10px] uppercase tracking-wider font-bold mb-0.5">Day {{ index + 1 }}</span>
                            <span class="font-black text-xl leading-none font-heiti">{{ day.dateShort }}</span>
                        </button>
                    </div>

                    <div>
                        <div class="flex items-center justify-between mb-5 px-1">
                            <div class="flex items-center gap-3">
                                <div class="w-8 h-8 rounded-full bg-p-mauve/20 flex items-center justify-center text-p-mauve border border-p-mauve/30">
                                    <i class="fa-regular fa-calendar"></i>
                                </div>
                                <h3 class="text-xl font-bold text-p-white text-glow">{{ myData.days[currentDayIndex].date }}</h3>
                            </div>
                            <span class="text-[10px] text-p-beige/50">Èï∑ÊåâÊãñÊõ≥ÊéíÂ∫è</span>
                        </div>
                        
                        <div class="relative pl-2">
                            <div class="absolute left-[3.5px] top-2 bottom-0 w-[1px] bg-p-beige/20 rounded-full"></div>
                            
                            <div ref="sortableList" class="space-y-4">
                                <div v-for="(item, idx) in myData.days[currentDayIndex].events" :key="item.id" 
                                     @click="openEditModal(idx)"
                                     class="relative group cursor-pointer active:cursor-grabbing">
                                    
                                    <div class="absolute -left-[17px] top-4 w-3 h-3 bg-p-darkBlue border-[3px] border-p-mauve rounded-full z-10 shadow-sm"></div>
                                    
                                    <div class="glass-card rounded-2xl p-0 overflow-hidden group hover:border-p-mauve/40 transition-all duration-300">
                                        
                                        <div v-if="item.img" class="h-24 w-full relative overflow-hidden">
                                            <img :src="item.img" class="absolute inset-0 w-full h-full object-cover transition-transform duration-700 group-hover:scale-110">
                                            <div class="absolute inset-0 bg-gradient-to-t from-p-darkBlue/90 via-transparent to-transparent"></div>
                                            <div class="absolute bottom-2 left-3 flex items-center gap-2 z-10">
                                                <span class="bg-p-mauve text-white font-bold text-[10px] px-2 py-0.5 rounded shadow">{{ item.time }}</span>
                                                <div class="flex items-center text-white text-[10px] gap-1 font-bold" v-if="item.weather">
                                                    <i :class="getWeatherIcon(item.weather)"></i><span>{{ item.temp }}</span>
                                                </div>
                                            </div>
                                        </div>

                                        <div v-else class="p-4 pb-0 flex justify-between items-center mb-1">
                                            <span class="bg-p-mauve/20 text-p-mauve font-bold text-[10px] px-2 py-0.5 rounded-full border border-p-mauve/30">{{ item.time }}</span>
                                            <div class="flex items-center text-p-beige/70 text-[10px] gap-1.5" v-if="item.weather">
                                                <i :class="getWeatherIcon(item.weather)"></i><span>{{ item.temp }}</span>
                                            </div>
                                        </div>
                                        
                                        <div class="p-4 pt-2 relative">
                                            <h4 class="font-bold text-lg text-p-white mb-1 leading-tight">{{ item.title }}</h4>
                                            <div class="flex items-center text-xs text-p-mauve mb-2">
                                                <i class="fa-solid fa-location-dot mr-1.5"></i>{{ item.location }}
                                            </div>
                                            <p class="text-sm text-p-beige/80 font-light leading-relaxed line-clamp-2">{{ item.desc }}</p>
                                            
                                            <a :href="'https://www.google.com/maps/search/?api=1&query=' + (item.addr || item.location)" target="_blank" @click.stop class="absolute bottom-3 right-3 w-8 h-8 rounded-full bg-p-midBlue/50 flex items-center justify-center text-p-mauve hover:text-white hover:bg-p-mauve transition-all border border-p-beige/10">
                                                <i class="fa-solid fa-diamond-turn-right text-xs"></i>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <button @click="openAddModal" class="w-full py-3 mt-6 rounded-xl border border-dashed border-p-mauve/40 text-p-mauve/70 hover:bg-p-mauve/10 hover:text-p-mauve hover:border-p-mauve transition-all font-bold flex items-center justify-center gap-2">
                                <i class="fa-solid fa-plus"></i> Êñ∞Â¢ûË°åÁ®ã
                            </button>
                        </div>
                    </div>
                </div>

                <div v-if="currentTab === 'map'" class="animate-fade-in h-full flex flex-col items-center justify-center pt-10 pb-20">
                    <div class="glass-card w-40 h-40 rounded-full flex items-center justify-center mb-8 border border-p-mauve/30 shadow-[0_0_40px_rgba(167,118,147,0.2)]">
                        <i class="fa-solid fa-map-location-dot text-6xl text-p-mauve"></i>
                    </div>
                    <h3 class="text-2xl font-bold text-p-white mb-3 text-glow">Êé¢Á¥¢Âú∞Âúñ</h3>
                    <p class="text-p-beige text-sm text-center font-light px-10">ÈªûÊìäË°åÁ®ãÂç°Áâá‰∏äÁöÑÂú∞ÈªûÂç≥ÂèØÈñãÂïüÂ∞éËà™</p>
                </div>

                <div v-if="currentTab === 'shops'" class="animate-fade-in space-y-4">
                    <h3 class="text-xl font-bold text-p-white pl-1 border-l-4 border-p-mauve text-glow">Á≤æÈÅ∏Â∫óËàñ</h3>
                    <div class="grid grid-cols-2 gap-4">
                        <div v-for="(shop, idx) in myData.shops" :key="idx" class="glass-card rounded-2xl p-4 flex flex-col items-center text-center gap-3 group hover:-translate-y-1 transition-transform duration-300">
                            <div class="w-12 h-12 rounded-full flex items-center justify-center text-xl mb-1 shadow-lg" :class="idx % 2 === 0 ? 'bg-p-mauve/20 text-p-mauve border border-p-mauve/30' : 'bg-p-beige/20 text-p-beige border border-p-beige/30'">
                                <i :class="['fa-solid', shop.icon]"></i>
                            </div>
                            <div>
                                <h4 class="font-bold text-p-white text-sm mb-1">{{ shop.name }}</h4>
                                <div class="text-[10px] text-p-beige/70 border border-p-beige/20 rounded-full px-2 py-0.5 inline-block">{{ shop.area }}</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div v-if="currentTab === 'hotel'" class="animate-fade-in space-y-5">
                    <h3 class="text-xl font-bold text-p-white pl-1 border-l-4 border-p-beige text-glow">‰ΩèÂÆøË≥áË®ä</h3>
                    
                    <div class="glass-card rounded-3xl overflow-hidden group">
                        <div class="h-56 relative">
                            <img :src="myData.hotel.image" class="absolute inset-0 w-full h-full object-cover opacity-90 transition-transform duration-700 group-hover:scale-105">
                            <div class="absolute inset-0 bg-gradient-to-t from-p-midBlue via-transparent to-transparent"></div>
                            
                            <div class="absolute bottom-4 left-4 right-4">
                                <div class="flex gap-1 mb-2">
                                    <i class="fa-solid fa-star text-xs text-p-beige"></i>
                                    <i class="fa-solid fa-star text-xs text-p-beige"></i>
                                    <i class="fa-solid fa-star text-xs text-p-beige"></i>
                                    <i class="fa-solid fa-star text-xs text-p-beige"></i>
                                </div>
                                <h2 class="text-2xl font-bold text-p-white mb-1 shadow-sm text-glow">{{ myData.hotel.name }}</h2>
                                <p class="text-xs text-p-beige flex items-center"><i class="fa-solid fa-location-dot mr-1"></i>{{ myData.hotel.address }}</p>
                            </div>
                        </div>
                        
                        <div class="p-5 flex justify-between text-center border-t border-p-beige/10">
                            <div>
                                <div class="text-xs text-p-beige/60 uppercase tracking-widest mb-1">Check-in</div>
                                <div class="text-xl font-bold text-p-mauve text-glow-mauve">14:00</div>
                                <div class="text-[10px] text-p-beige mt-1">{{ myData.hotel.checkIn }}</div>
                            </div>
                            <div class="w-[1px] bg-p-beige/20"></div>
                            <div>
                                <div class="text-xs text-p-beige/60 uppercase tracking-widest mb-1">Check-out</div>
                                <div class="text-xl font-bold text-p-white text-glow">12:00</div>
                                <div class="text-[10px] text-p-beige mt-1">{{ myData.hotel.checkOut }}</div>
                            </div>
                        </div>
                    </div>
                </div>

            </main>

            <nav class="glass-nav h-20 px-6 flex justify-between items-center z-20 rounded-t-[2.5rem] pb-2 relative flex-shrink-0">
                <button @click="currentTab = 'flight'" :class="currentTab === 'flight' ? 'text-p-mauve scale-110 drop-shadow-md' : 'text-p-beige/40 hover:text-p-beige'" class="flex flex-col items-center gap-1 w-12 transition-all duration-300">
                    <i class="fa-solid fa-plane-departure text-xl"></i>
                    <span class="text-[10px] font-bold">Ëà™Áè≠</span>
                </button>
                <button @click="currentTab = 'schedule'" :class="currentTab === 'schedule' ? 'text-p-mauve scale-110 drop-shadow-md' : 'text-p-beige/40 hover:text-p-beige'" class="flex flex-col items-center gap-1 w-12 transition-all duration-300">
                    <i class="fa-solid fa-clipboard-list text-xl"></i>
                    <span class="text-[10px] font-bold">Ë°åÁ®ã</span>
                </button>
                <div class="-mt-10 relative z-10">
                    <button @click="currentTab = 'map'" class="bg-gradient-to-tr from-p-midBlue to-p-mauve text-white w-14 h-14 rounded-full shadow-lg shadow-p-mauve/40 border-[3px] border-p-midBlue flex items-center justify-center transform transition-transform active:scale-95">
                        <i class="fa-solid fa-map text-2xl"></i>
                    </button>
                </div>
                <button @click="currentTab = 'shops'" :class="currentTab === 'shops' ? 'text-p-mauve scale-110 drop-shadow-md' : 'text-p-beige/40 hover:text-p-beige'" class="flex flex-col items-center gap-1 w-12 transition-all duration-300">
                    <i class="fa-solid fa-store text-xl"></i>
                    <span class="text-[10px] font-bold">Â∫óËàñ</span>
                </button>
                <button @click="currentTab = 'hotel'" :class="currentTab === 'hotel' ? 'text-p-mauve scale-110 drop-shadow-md' : 'text-p-beige/40 hover:text-p-beige'" class="flex flex-col items-center gap-1 w-12 transition-all duration-300">
                    <i class="fa-solid fa-bed text-xl"></i>
                    <span class="text-[10px] font-bold">‰ΩèÂÆø</span>
                </button>
            </nav>

            <div v-if="showModal" class="fixed inset-0 z-50 flex items-center justify-center p-4 animate-fade-in glass-modal">
                <div class="glass-card w-full max-w-sm rounded-3xl p-6 relative flex flex-col max-h-[90vh] overflow-hidden border border-p-mauve/50">
                    <h3 class="text-2xl font-bold text-center mb-4 text-p-white text-glow">{{ isEditing ? 'Á∑®ËºØË°åÁ®ã' : 'Êñ∞Â¢ûË°åÁ®ã' }}</h3>
                    
                    <div class="overflow-y-auto space-y-4 pr-1 scrollbar-hide flex-1">
                        <div>
                            <label class="text-xs text-p-beige font-bold uppercase">ÊôÇÈñì</label>
                            <input v-model="modalData.time" type="text" class="w-full bg-white/10 border border-white/20 rounded-lg p-2 text-white focus:border-p-mauve outline-none mt-1">
                        </div>
                        <div>
                            <label class="text-xs text-p-beige font-bold uppercase">Ê®ôÈ°å</label>
                            <input v-model="modalData.title" type="text" class="w-full bg-white/10 border border-white/20 rounded-lg p-2 text-white focus:border-p-mauve outline-none mt-1">
                        </div>
                        <div>
                            <label class="text-xs text-p-beige font-bold uppercase">Âú∞Èªû (Â∞éËà™Áî®)</label>
                            <input v-model="modalData.location" type="text" class="w-full bg-white/10 border border-white/20 rounded-lg p-2 text-white focus:border-p-mauve outline-none mt-1">
                        </div>
                        <div>
                            <label class="text-xs text-p-beige font-bold uppercase">Âú∞ÂùÄ (È°ØÁ§∫Áî®)</label>
                            <input v-model="modalData.addr" type="text" class="w-full bg-white/10 border border-white/20 rounded-lg p-2 text-white focus:border-p-mauve outline-none mt-1">
                        </div>
                        <div>
                            <label class="text-xs text-p-beige font-bold uppercase">ÂúñÁâáÁ∂≤ÂùÄ</label>
                            <input v-model="modalData.img" type="text" placeholder="https://..." class="w-full bg-white/10 border border-white/20 rounded-lg p-2 text-white focus:border-p-mauve outline-none mt-1">
                        </div>
                        <div v-if="modalData.img" class="h-32 rounded-lg overflow-hidden border border-white/20">
                            <img :src="modalData.img" class="w-full h-full object-cover">
                        </div>
                        <div>
                            <label class="text-xs text-p-beige font-bold uppercase">Ë©≥Á¥∞ÊèèËø∞</label>
                            <textarea v-model="modalData.desc" rows="3" class="w-full bg-white/10 border border-white/20 rounded-lg p-2 text-white focus:border-p-mauve outline-none mt-1"></textarea>
                        </div>
                    </div>

                    <div class="flex gap-3 mt-6 pt-4 border-t border-white/10">
                        <button v-if="isEditing" @click="deleteEvent" class="flex-1 py-3 rounded-xl bg-red-500/80 text-white font-bold hover:bg-red-500">Âà™Èô§</button>
                        <button @click="showModal = false" class="flex-1 py-3 rounded-xl bg-white/10 text-white font-bold hover:bg-white/20">ÂèñÊ∂à</button>
                        <button @click="saveEvent" class="flex-1 py-3 rounded-xl bg-p-mauve text-white font-bold hover:bg-white hover:text-p-mauve shadow-lg">ÂÑ≤Â≠ò</button>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <script>
        const { createApp, ref, onMounted, nextTick, watch } = Vue;

        const myTripData = {
            title: "ËÅñË™ï‰∏äÊµ∑‰πãÊóÖ", 
            shops: [
                { name: "Âß•Âß•ÂÆ∂ Grandmas", area: "Â§ñÁÅò", icon: "fa-utensils" },
                { name: "M Stand", area: "Êñ∞Â§©Âú∞", icon: "fa-mug-hot" },
                { name: "Haus Nowhere", area: "Ê∑ÆÊµ∑‰∏≠Ë∑Ø", icon: "fa-bag-shopping" },
                { name: "Peet's Coffee", area: "Ê≠¶Â∫∑Ë∑Ø", icon: "fa-mug-saucer" }
            ],
            hotel: {
                name: "‰∏äÊµ∑Êù±Èå¶Ê±üÂ∏åÁàæÈ†ìÈÄ∏ÊûóÈÖíÂ∫ó",
                engName: "DoubleTree by Hilton",
                address: "‰∏äÊµ∑Â∏ÇÊµ¶Êù±Êñ∞ÂçÄÊù±ÊñπË∑Ø889Ëôü",
                checkIn: "12Êúà23Êó•", checkOut: "12Êúà26Êó•",
                image: "https://images.unsplash.com/photo-1590490360182-c33d57733427?q=80&w=1000&auto=format&fit=crop"
            },
            flightOut: { from: "HKG", to: "PVG", date: "2025/12/23", no: "MU726", dep: "07:40", arr: "10:30", airline: "Êù±ÊñπËà™Á©∫" },
            flightIn: { from: "PVG", to: "HKG", date: "2025/12/26", no: "MU725", dep: "21:20", arr: "00:15", airline: "Êù±ÊñπËà™Á©∫" },
            days: [
                {
                    date: "12Êúà23Êó• (‰∫å)", dateShort: "23", 
                    events: [
                        { id: 1, time: "10:30", title: "ÊäµÈÅî‰∏äÊµ∑Êµ¶Êù±", location: "‰∏äÊµ∑Êµ¶Êù±ÂúãÈöõÊ©üÂ†¥", desc: "ÂÖ•Â¢ÉÊâãÁ∫å„ÄÅÈ†òÂèñË°åÊùé„ÄÇ", weather: "cloudy", temp: "8¬∞C", img: "https://images.unsplash.com/photo-1474302770737-173ee21bab63?q=80&w=1000", addr: "Êµ¶Êù±Êñ∞ÂçÄ" },
                        { id: 2, time: "15:00", title: "Êµ¶Êù±ÁæéË°ìÈ§®", location: "Êµ¶Êù±ÁæéË°ìÈ§®", desc: "Ê¨£Ë≥ûÂª∫ÁØâ‰πãÁæéÔºåÁõ¥Èù¢Â§ñÁÅò„ÄÇ", weather: "cloudy", temp: "9¬∞C", img: "https://images.unsplash.com/photo-1634351330397-6950295232a5?q=80&w=1000", addr: "Êø±Ê±üÂ§ßÈÅì2777Ëôü" },
                        { id: 3, time: "18:00", title: "ÂçÅÂÖ≠Èã™Á¢ºÈ†≠", location: "ÂçÅÂÖ≠Èã™Á¢ºÈ†≠", desc: "Ê¨£Ë≥ûÈªÉÊµ¶Ê±üÁíÄÁí®Â§úÊôØ„ÄÇ", weather: "clear", temp: "5¬∞C", addr: "‰∏≠Â±±Êù±‰∫åË∑Ø531Ëôü", img: "https://images.unsplash.com/photo-1548658166-136d9f6a7df1?q=80&w=1000" }
                    ]
                },
                {
                    date: "12Êúà24Êó• (‰∏â)", dateShort: "24",
                    events: [
                        { id: 4, time: "10:00", title: "Ë±´Âúí & ÂüéÈöçÂªü", location: "Ë±´Âúí", desc: "Ê±üÂçóÂè§ÂÖ∏ÂúíÊûó„ÄÇ", weather: "sunny", temp: "9¬∞C", img: "https://images.unsplash.com/photo-1580910543239-166299d25725?q=80&w=1000", addr: "Á¶è‰ΩëË∑Ø168Ëôü" },
                        { id: 5, time: "14:30", title: "Êñ∞Â§©Âú∞ÂåóÈáå", location: "‰∏äÊµ∑Êñ∞Â§©Âú∞", desc: "Âπ≥ÂÆâÂ§úÈÄõË°ó„ÄÇ", weather: "sunny", temp: "10¬∞C", img: "https://images.unsplash.com/photo-1548658827-63d0529d2b27?q=80&w=1000" },
                        { id: 6, time: "19:00", title: "Âπ≥ÂÆâÂ§úÊôöÈ§ê", location: "Êñ∞Â§©Âú∞", desc: "ËÅñË™ïÂ§ßÈ§ê„ÄÇ", weather: "clear", temp: "6¬∞C", img: "https://images.unsplash.com/photo-1543007630-9710e4a00a20?q=80&w=1000" }
                    ]
                },
                {
                    date: "12Êúà25Êó• (Âõõ)", dateShort: "25",
                    events: [
                        { id: 7, time: "10:00", title: "Êú±ÂÆ∂ËßíÂè§ÈéÆ", location: "Êú±ÂÆ∂ËßíÂè§ÈéÆ", desc: "‰∏äÊµ∑Â®ÅÂ∞ºÊñØ„ÄÇ", weather: "sunny", temp: "11¬∞C", img: "https://images.unsplash.com/photo-1548956923-38c826922904?q=80&w=1000" },
                        { id: 8, time: "17:00", title: "ËøîÂõûÂ∏ÇÂçÄ", location: "‰∫∫Ê∞ëÂª£Â†¥", desc: "‰ºëÊÅØ/ÊôöÈ§ê", img: "https://images.unsplash.com/photo-1505164294036-746a5f67a2cb?q=80&w=1000" }
                    ]
                },
                {
                    date: "12Êúà26Êó• (‰∫î)", dateShort: "26",
                    events: [
                        { id: 9, time: "10:30", title: "Ê≠¶Â∫∑Ë∑Ø City Walk", location: "Ê≠¶Â∫∑Ë∑Ø", desc: "Ê≥ïÁßüÁïåÈ¢®ÊÉÖ„ÄÇ", img: "https://images.unsplash.com/photo-1678786968037-33633667c427?q=80&w=1000" },
                        { id: 10, time: "14:00", title: "Áî∞Â≠êÂùä", location: "Áî∞Â≠êÂùä", desc: "ÂºÑÂ†ÇÊñáÂâµ„ÄÇ", img: "https://images.unsplash.com/photo-1558273643-979929281a8f?q=80&w=1000" },
                        { id: 11, time: "17:30", title: "ÂâçÂæÄÊ©üÂ†¥", location: "Êµ¶Êù±Ê©üÂ†¥", desc: "ËøîÁ®ã", img: "https://images.unsplash.com/photo-1530521954074-e64f6810b32d?q=80&w=1000" }
                    ]
                }
            ]
        };

        const { createApp, ref, onMounted, nextTick, watch } = Vue;
        createApp({
            setup() {
                const currentTab = ref('schedule');
                const appTitle = ref(myTripData.title);
                const currentDayIndex = ref(0);
                const myData = ref(myTripData); 
                const sortableList = ref(null);
                const showModal = ref(false);
                const isEditing = ref(false);
                const editingIdx = ref(-1);
                const modalData = ref({}); 

                const getWeatherIcon = (type) => {
                    const t = type ? type.toLowerCase() : '';
                    if (t.includes('sun') || t.includes('clear')) return 'fa-solid fa-sun text-p-beige'; 
                    if (t.includes('cloud')) return 'fa-solid fa-cloud text-p-beige/60';
                    return 'fa-solid fa-cloud-sun text-p-beige';
                };

                const initSortable = () => {
                    if (sortableList.value) {
                        new Sortable(sortableList.value, {
                            animation: 150,
                            handle: '.glass-card', 
                            delay: 200, 
                            delayOnTouchOnly: true,
                            ghostClass: 'sortable-ghost',
                            dragClass: 'sortable-drag',
                            onEnd: (evt) => {
                                const item = myData.value.days[currentDayIndex.value].events.splice(evt.oldIndex, 1)[0];
                                myData.value.days[currentDayIndex.value].events.splice(evt.newIndex, 0, item);
                            }
                        });
                    }
                };

                watch([currentTab, currentDayIndex], async () => {
                    if (currentTab.value === 'schedule') {
                        await nextTick();
                        initSortable();
                    }
                });

                onMounted(() => {
                    initSortable();
                });

                const openAddModal = () => {
                    isEditing.value = false;
                    modalData.value = { time: "", title: "", location: "", desc: "", img: "", addr: "" };
                    showModal.value = true;
                };

                const openEditModal = (idx) => {
                    isEditing.value = true;
                    editingIdx.value = idx;
                    modalData.value = { ...myData.value.days[currentDayIndex.value].events[idx] };
                    showModal.value = true;
                };

                const saveEvent = () => {
                    const currentEvents = myData.value.days[currentDayIndex.value].events;
                    if (isEditing.value) {
                        currentEvents[editingIdx.value] = { ...modalData.value, id: currentEvents[editingIdx.value].id };
                    } else {
                        currentEvents.push({ ...modalData.value, id: Date.now() });
                    }
                    showModal.value = false;
                };

                const deleteEvent = () => {
                    if (confirm("Á¢∫ÂÆöË¶ÅÂà™Èô§Ê≠§Ë°åÁ®ãÂóéÔºü")) {
                        myData.value.days[currentDayIndex.value].events.splice(editingIdx.value, 1);
                        showModal.value = false;
                    }
                };

                return { currentTab, appTitle, currentDayIndex, myData, getWeatherIcon, sortableList, showModal, isEditing, modalData, openAddModal, openEditModal, saveEvent, deleteEvent };
            }
        }).mount('#app');
    </script>
</body>
</html>
