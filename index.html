<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>è–èª•ä¸Šæµ·ä¹‹æ—… 2025</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@latest/Sortable.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Yomogi&family=Noto+Sans+SC:wght@300;400;700;900&family=Noto+Sans+TC:wght@300;400;700;900&family=Caveat:wght@700&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        // å…¨æ–°é®®æ˜éœ“è™¹é…è‰²
                        p: { 
                            white: '#FFFFFF',    // ç´”ç™½æ–‡å­—ï¼Œå°æ¯”æœ€å¼·
                            apricot: '#FFC857',  // é®®æ˜é‡‘æè‰² (æ›¿ä»£åŸæœ¬çš„ beige)
                            purple: '#E056FD',   // é®®æ˜éœ“è™¹ç´« (æ›¿ä»£åŸæœ¬çš„ mauve)
                            midBlue: '#1E40AF',  // æ›´é£½å’Œçš„æ·±è—
                            darkBlue: '#0F172A', // åˆå¤œæ·±è—èƒŒæ™¯
                        }
                    },
                    fontFamily: { 
                        sans: ['Noto Sans TC', 'sans-serif'],
                        hand: ['Caveat', 'cursive'], 
                        deco: ['Yomogi', 'cursive'], 
                        heiti: ['Noto Sans SC', 'Heiti SC', 'SimHei', 'sans-serif']
                    }
                }
            }
        }
    </script>
    <style>
        html, body {
            height: 100%;
            height: 100dvh;
            overflow: hidden;
            overscroll-behavior: none;
            background-color: #0F172A; /* ä½¿ç”¨æ–°çš„æ·±èƒŒæ™¯è‰² */
            color: #FFFFFF;
        }
        
        #app {
            height: 100%;
            width: 100%;
            display: flex;
            justify-content: center;
        }

        .scrollbar-hide::-webkit-scrollbar { display: none; }
        .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }
        .animate-fade-in { animation: fadeIn 0.5s cubic-bezier(0.2, 0.8, 0.2, 1) forwards; }
        .animate-spin-slow { animation: spin 12s linear infinite; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; transform: translateY(0); } }
        
        /* æ·±è‰²ç»ç’ƒæ“¬æ…‹ - é‚Šæ¡†è‰²æ›´æ–° */
        .glass-card {
            background: rgba(30, 64, 175, 0.3); /* åŸºæ–¼ midBlue çš„åŠé€ */
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 200, 87, 0.2); /* é®®æ˜æè‰²å¾®å…‰é‚Šæ¡† */
            box-shadow: 0 8px 32px 0 rgba(15, 23, 42, 0.5);
        }
        
        /* å°èˆªåˆ— - é ‚éƒ¨é‚Šæ¡†èˆ‡å…‰æšˆæ›´æ–° */
        .glass-nav {
            background: rgba(15, 23, 42, 0.85);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-top: 1px solid rgba(224, 86, 253, 0.3); /* é®®æ˜ç´«è‰²é‚Šæ¡† */
            box-shadow: 0 -10px 40px rgba(0,0,0,0.7);
        }

        /* è£é£¾åœ“åœˆ - é¡è‰²æ›´æ–° */
        .glass-deco {
            background: rgba(224, 86, 253, 0.2);
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 200, 87, 0.3);
            box-shadow: 0 0 15px rgba(224, 86, 253, 0.4);
        }
        
        .glass-modal {
            background: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(15px);
        }

        /* æ–‡å­—ç™¼å…‰ - é¡è‰²æ›´æ–° */
        .text-glow { text-shadow: 0 0 12px rgba(255, 255, 255, 0.7); }
        .text-glow-purple { text-shadow: 0 0 15px rgba(224, 86, 253, 0.8); } /* æ›´å¼·çƒˆçš„ç´«è‰²å…‰æšˆ */
        
        /* æ‹–æ›³æ¨£å¼ */
        .sortable-ghost { opacity: 0.3; }
        .sortable-drag { cursor: grabbing; background: rgba(224, 86, 253, 0.3); }
    </style>
</head>
<body>
    <div id="app" class="font-sans font-medium text-p-white">
        <div class="w-full max-w-md h-full relative shadow-2xl flex flex-col overflow-hidden bg-transparent">
            
            <div class="absolute inset-0 z-0 pointer-events-none bg-gradient-to-b from-p-darkBlue to-p-midBlue">
                <div class="absolute top-[-10%] right-[-10%] w-[400px] h-[400px] bg-p-purple/20 rounded-full blur-[100px]"></div>
                <div class="absolute bottom-[-10%] left-[-20%] w-[350px] h-[350px] bg-p-midBlue/40 rounded-full blur-[100px]"></div>
            </div>

            <header class="bg-transparent p-3 pt-4 z-10 flex justify-between items-start relative flex-shrink-0">
                <div class="relative z-10 pl-2 flex flex-col justify-center w-full">
                    <h2 class="text-[10px] tracking-widest opacity-90 text-p-apricot mb-0.5 font-deco font-bold rotate-1 drop-shadow-md leading-none">Wayne & Chloe | Shanghai 2025</h2>
                    <h1 class="text-3xl font-deco tracking-tight text-white drop-shadow-lg font-bold mt-0.5 text-glow">
                        <span class="inline-block filter drop-shadow-none">ğŸ„</span> è–èª•ä¸Šæµ·ä¹‹æ—… <span class="inline-block filter drop-shadow-none">âœ¨</span>
                    </h1>
                </div>
                <div class="w-9 h-9 glass-deco rounded-full flex items-center justify-center shadow-inner flex-shrink-0 mr-2">
                    <i class="fa-solid fa-plane-up text-p-apricot animate-bounce text-xs"></i>
                </div>
            </header>

            <main class="flex-1 overflow-y-auto scrollbar-hide p-5 pb-24 space-y-6 relative z-10">
                
                <div v-if="currentTab === 'flight'" class="animate-fade-in space-y-5">
                    <h3 class="text-xl font-bold text-p-white tracking-wide pl-1 border-l-4 border-p-purple text-glow">èˆªç­è³‡è¨Š</h3>
                    
                    <div class="glass-card rounded-3xl p-5 relative overflow-hidden group">
                        <div class="absolute top-4 left-4 bg-p-purple text-white text-[10px] px-2 py-0.5 rounded-full font-bold tracking-widest shadow-md shadow-p-purple/30">å»ç¨‹ OUTBOUND</div>
                        <div class="mt-8 flex justify-between items-center mb-6">
                            <div class="text-center">
                                <div class="text-4xl font-black text-p-white font-heiti tracking-tighter text-glow">{{ myData.flightOut.from }}</div>
                                <div class="text-xs text-p-apricot mt-1">é¦™æ¸¯ T1</div>
                            </div>
                            <div class="flex-1 px-4 flex flex-col items-center">
                                <div class="text-[10px] text-p-purple mb-1">{{ myData.flightOut.airline }}</div>
                                <div class="w-full h-[1px] bg-gradient-to-r from-transparent via-p-apricot/50 to-transparent relative">
                                    <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-1.5 h-1.5 bg-p-purple rounded-full shadow-[0_0_8px_#E056FD]"></div>
                                </div>
                                <div class="text-[10px] text-p-apricot mt-1">{{ myData.flightOut.no }}</div>
                            </div>
                            <div class="text-center">
                                <div class="text-4xl font-black text-p-white font-heiti tracking-tighter text-glow">{{ myData.flightOut.to }}</div>
                                <div class="text-xs text-p-apricot mt-1">æµ¦æ± T1</div>
                            </div>
                        </div>
                        <div class="flex justify-between text-sm pt-4 border-t border-p-apricot/10">
                            <div><span class="text-p-apricot/70 text-xs mr-2">Dep</span><span class="font-bold text-p-purple">{{ myData.flightOut.dep }}</span></div>
                            <div><span class="text-p-apricot/70 text-xs mr-2">Arr</span><span class="font-bold text-p-purple">{{ myData.flightOut.arr }}</span></div>
                        </div>
                    </div>

                    <div class="glass-card rounded-3xl p-5 relative overflow-hidden group">
                        <div class="absolute top-4 left-4 bg-p-apricot text-p-darkBlue text-[10px] px-2 py-0.5 rounded-full font-bold tracking-widest shadow-md shadow-p-apricot/30">å›ç¨‹ INBOUND</div>
                        <div class="mt-8 flex justify-between items-center mb-6">
                            <div class="text-center">
                                <div class="text-4xl font-black text-p-white font-heiti tracking-tighter text-glow">{{ myData.flightIn.from }}</div>
                                <div class="text-xs text-p-apricot mt-1">æµ¦æ± T1</div>
                            </div>
                            <div class="flex-1 px-4 flex flex-col items-center">
                                <div class="text-[10px] text-p-apricot mb-1">{{ myData.flightIn.airline }}</div>
                                <div class="w-full h-[1px] bg-gradient-to-r from-transparent via-p-apricot/50 to-transparent relative">
                                    <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-1.5 h-1.5 bg-p-apricot rounded-full shadow-[0_0_8px_#FFC857]"></div>
                                </div>
                                <div class="text-[10px] text-p-apricot mt-1">{{ myData.flightIn.no }}</div>
                            </div>
                            <div class="text-center">
                                <div class="text-4xl font-black text-p-white font-heiti tracking-tighter text-glow">{{ myData.flightIn.to }}</div>
                                <div class="text-xs text-p-apricot mt-1">é¦™æ¸¯ T1</div>
                            </div>
                        </div>
                        <div class="flex justify-between text-sm pt-4 border-t border-p-apricot/10">
                            <div><span class="text-p-apricot/70 text-xs mr-2">Dep</span><span class="font-bold text-p-white">{{ myData.flightIn.dep }}</span></div>
                            <div><span class="text-p-apricot/70 text-xs mr-2">Arr</span><span class="font-bold text-p-white">{{ myData.flightIn.arr }}</span></div>
                        </div>
                    </div>
                </div>

                <div v-if="currentTab === 'schedule'" class="animate-fade-in space-y-6">
                    <div class="flex overflow-x-auto space-x-3 pb-2 scrollbar-hide px-1">
                        <button v-for="(day, index) in myData.days" :key="index" @click="currentDayIndex = index" 
                            :class="currentDayIndex === index ? 'bg-p-purple text-white shadow-lg shadow-p-purple/40 border-transparent' : 'glass-card text-p-apricot border-p-apricot/20'"
                            class="flex-shrink-0 px-5 py-3 rounded-2xl flex flex-col items-center min-w-[70px] transition-all duration-300">
                            <span class="text-[10px] uppercase tracking-wider font-bold mb-0.5">Day {{ index + 1 }}</span>
                            <span class="font-black text-xl leading-none font-heiti">{{ day.dateShort }}</span>
                        </button>
                    </div>

                    <div>
                        <div class="flex items-center justify-between mb-5 px-1">
                            <div class="flex items-center gap-3">
                                <div class="w-8 h-8 rounded-full bg-p-purple/20 flex items-center justify-center text-p-purple border border-p-purple/30">
                                    <i class="fa-regular fa-calendar"></i>
                                </div>
                                <h3 class="text-xl font-bold text-p-white text-glow">{{ myData.days[currentDayIndex].date }}</h3>
                            </div>
                            <span class="text-[10px] text-p-apricot/50">é•·æŒ‰æ‹–æ›³æ’åº</span>
                        </div>
                        
                        <div class="relative pl-2">
                            <div class="absolute left-[3.5px] top-2 bottom-0 w-[1px] bg-p-apricot/20 rounded-full"></div>
                            
                            <div ref="sortableList" class="space-y-4">
                                <div v-for="(item, idx) in myData.days[currentDayIndex].events" :key="item.id" 
                                     @click="openEditModal(idx)"
                                     class="relative group cursor-pointer active:cursor-grabbing">
                                    
                                    <div class="absolute -left-[17px] top-4 w-3 h-3 bg-p-darkBlue border-[3px] border-p-purple rounded-full z-10 shadow-sm shadow-p-purple/50"></div>
                                    
                                    <div class="glass-card rounded-2xl p-0 overflow-hidden group hover:border-p-purple/50 transition-all duration-300">
                                        
                                        <div v-if="item.img" class="h-24 w-full relative overflow-hidden">
                                            <img :src="item.img" class="absolute inset-0 w-full h-full object-cover transition-transform duration-700 group-hover:scale-110">
                                            <div class="absolute inset-0 bg-gradient-to-t from-p-darkBlue/90 via-transparent to-transparent"></div>
                                            <div class="absolute bottom-2 left-3 flex items-center gap-2 z-10">
                                                <span class="bg-p-purple text-white font-bold text-[10px] px-2 py-0.5 rounded shadow-md shadow-p-purple/30">{{ item.time }}</span>
                                                <div class="flex items-center text-white text-[10px] gap-1 font-bold" v-if="item.weather">
                                                    <i :class="getWeatherIcon(item.weather)"></i><span>{{ item.temp }}</span>
                                                </div>
                                            </div>
                                        </div>

                                        <div v-else class="p-4 pb-0 flex justify-between items-center mb-1">
                                            <span class="bg-p-purple/20 text-p-purple font-bold text-[10px] px-2 py-0.5 rounded-full border border-p-purple/30">{{ item.time }}</span>
                                            <div class="flex items-center text-p-apricot/70 text-[10px] gap-1.5" v-if="item.weather">
                                                <i :class="getWeatherIcon(item.weather)"></i><span>{{ item.temp }}</span>
                                            </div>
                                        </div>
                                        
                                        <div class="p-4 pt-2 relative">
                                            <h4 class="font-bold text-lg text-p-white mb-1 leading-tight">{{ item.title }}</h4>
                                            <div class="flex items-center text-xs text-p-purple mb-2">
                                                <i class="fa-solid fa-location-dot mr-1.5"></i>{{ item.location }}
                                            </div>
                                            <p class="text-sm text-p-apricot/80 font-light leading-relaxed line-clamp-2">{{ item.desc }}</p>
                                            
                                            <a :href="'https://www.google.com/maps/search/?api=1&query=' + (item.addr || item.location)" target="_blank" @click.stop class="absolute bottom-3 right-3 w-8 h-8 rounded-full bg-p-midBlue/50 flex items-center justify-center text-p-purple hover:text-white hover:bg-p-purple transition-all border border-p-apricot/20 shadow-sm shadow-p-purple/20">
                                                <i class="fa-solid fa-diamond-turn-right text-xs"></i>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <button @click="openAddModal" class="w-full py-3 mt-6 rounded-xl border border-dashed border-p-purple/40 text-p-purple/70 hover:bg-p-purple/10 hover:text-p-purple hover:border-p-purple transition-all font-bold flex items-center justify-center gap-2">
                                <i class="fa-solid fa-plus"></i> æ–°å¢è¡Œç¨‹
                            </button>
                        </div>
                    </div>
                </div>

                <div v-if="currentTab === 'map'" class="animate-fade-in h-full flex flex-col items-center justify-center pt-10 pb-20">
                    <div class="glass-card w-40 h-40 rounded-full flex items-center justify-center mb-8 border border-p-purple/30 shadow-[0_0_40px_rgba(224,86,253,0.3)]">
                        <i class="fa-solid fa-map-location-dot text-6xl text-p-purple drop-shadow-[0_0_10px_rgba(224,86,253,0.5)]"></i>
                    </div>
                    <h3 class="text-2xl font-bold text-p-white mb-3 text-glow">æ¢ç´¢åœ°åœ–</h3>
                    <p class="text-p-apricot text-sm text-center font-light px-10">é»æ“Šè¡Œç¨‹å¡ç‰‡ä¸Šçš„åœ°é»å³å¯é–‹å•Ÿå°èˆª</p>
                </div>

                <div v-if="currentTab === 'shops'" class="animate-fade-in space-y-4">
                    <h3 class="text-xl font-bold text-p-white pl-1 border-l-4 border-p-purple text-glow">ç²¾é¸åº—èˆ–</h3>
                    <div class="grid grid-cols-2 gap-4">
                        <div v-for="(shop, idx) in myData.shops" :key="idx" class="glass-card rounded-2xl p-4 flex flex-col items-center text-center gap-3 group hover:-translate-y-1 transition-transform duration-300">
                            <div class="w-12 h-12 rounded-full flex items-center justify-center text-xl mb-1 shadow-lg" :class="idx % 2 === 0 ? 'bg-p-purple/20 text-p-purple border border-p-purple/30 shadow-p-purple/20' : 'bg-p-apricot/20 text-p-apricot border border-p-apricot/30 shadow-p-apricot/20'">
                                <i :class="['fa-solid', shop.icon]"></i>
                            </div>
                            <div>
                                <h4 class="font-bold text-p-white text-sm mb-1">{{ shop.name }}</h4>
                                <div class="text-[10px] text-p-apricot/70 border border-p-apricot/20 rounded-full px-2 py-0.5 inline-block">{{ shop.area }}</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div v-if="currentTab === 'hotel'" class="animate-fade-in space-y-5">
                    <h3 class="text-xl font-bold text-p-white pl-1 border-l-4 border-p-apricot text-glow">ä½å®¿è³‡è¨Š</h3>
                    
                    <div class="glass-card rounded-3xl overflow-hidden group">
                        <div class="h-56 relative">
                            <img :src="myData.hotel.image" class="absolute inset-0 w-full h-full object-cover opacity-90 transition-transform duration-700 group-hover:scale-105">
                            <div class="absolute inset-0 bg-gradient-to-t from-p-midBlue via-transparent to-transparent"></div>
                            
                            <div class="absolute bottom-4 left-4 right-4">
                                <div class="flex gap-1 mb-2">
                                    <i class="fa-solid fa-star text-xs text-p-apricot"></i>
                                    <i class="fa-solid fa-star text-xs text-p-apricot"></i>
                                    <i class="fa-solid fa-star text-xs text-p-apricot"></i>
                                    <i class="fa-solid fa-star text-xs text-p-apricot"></i>
                                </div>
                                <h2 class="text-2xl font-bold text-p-white mb-1 shadow-sm text-glow">{{ myData.hotel.name }}</h2>
                                <p class="text-xs text-p-apricot flex items-center"><i class="fa-solid fa-location-dot mr-1"></i>{{ myData.hotel.address }}</p>
                            </div>
                        </div>
                        
                        <div class="p-5 flex justify-between text-center border-t border-p-apricot/10">
                            <div>
                                <div class="text-xs text-p-apricot/60 uppercase tracking-widest mb-1">Check-in</div>
                                <div class="text-xl font-bold text-p-purple text-glow-purple">14:00</div>
                                <div class="text-[10px] text-p-apricot mt-1">{{ myData.hotel.checkIn }}</div>
                            </div>
                            <div class="w-[1px] bg-p-apricot/20"></div>
                            <div>
                                <div class="text-xs text-p-apricot/60 uppercase tracking-widest mb-1">Check-out</div>
                                <div class="text-xl font-bold text-p-white text-glow">12:00</div>
                                <div class="text-[10px] text-p-apricot mt-1">{{ myData.hotel.checkOut }}</div>
                            </div>
                        </div>
                    </div>
                </div>

            </main>

            <nav class="glass-nav h-20 px-6 flex justify-between items-center z-20 rounded-t-[2.5rem] pb-2 relative flex-shrink-0">
                <button @click="currentTab = 'flight'" :class="currentTab === 'flight' ? 'text-p-purple scale-110 drop-shadow-[0_0_8px_rgba(224,86,253,0.6)]' : 'text-p-apricot/50 hover:text-p-apricot'" class="flex flex-col items-center gap-1 w-12 transition-all duration-300">
                    <i class="fa-solid fa-plane-departure text-xl"></i>
                    <span class="text-[10px] font-bold">èˆªç­</span>
                </button>
                <button @click="currentTab = 'schedule'" :class="currentTab === 'schedule' ? 'text-p-purple scale-110 drop-shadow-[0_0_8px_rgba(224,86,253,0.6)]' : 'text-p-apricot/50 hover:text-p-apricot'" class="flex flex-col items-center gap-1 w-12 transition-all duration-300">
                    <i class="fa-solid fa-clipboard-list text-xl"></i>
                    <span class="text-[10px] font-bold">è¡Œç¨‹</span>
                </button>
                <div class="-mt-10 relative z-10">
                    <button @click="currentTab = 'map'" class="bg-gradient-to-tr from-p-midBlue to-p-purple text-white w-14 h-14 rounded-full shadow-lg shadow-p-purple/50 border-[3px] border-p-midBlue flex items-center justify-center transform transition-transform active:scale-95">
                        <i class="fa-solid fa-map text-2xl animate-pulse"></i>
                    </button>
                </div>
                <button @click="currentTab = 'shops'" :class="currentTab === 'shops' ? 'text-p-purple scale-110 drop-shadow-[0_0_8px_rgba(224,86,253,0.6)]' : 'text-p-apricot/50 hover:text-p-apricot'" class="flex flex-col items-center gap-1 w-12 transition-all duration-300">
                    <i class="fa-solid fa-store text-xl"></i>
                    <span class="text-[10px] font-bold">åº—èˆ–</span>
                </button>
                <button @click="currentTab = 'hotel'" :class="currentTab === 'hotel' ? 'text-p-purple scale-110 drop-shadow-[0_0_8px_rgba(224,86,253,0.6)]' : 'text-p-apricot/50 hover:text-p-apricot'" class="flex flex-col items-center gap-1 w-12 transition-all duration-300">
                    <i class="fa-solid fa-bed text-xl"></i>
                    <span class="text-[10px] font-bold">ä½å®¿</span>
                </button>
            </nav>

            <div v-if="showModal" class="fixed inset-0 z-50 flex items-center justify-center p-4 animate-fade-in glass-modal">
                <div class="glass-card w-full max-w-sm rounded-3xl p-6 relative flex flex-col max-h-[90vh] overflow-hidden border border-p-purple/50">
                    <h3 class="text-2xl font-bold text-center mb-4 text-p-white text-glow">{{ isEditing ? 'ç·¨è¼¯è¡Œç¨‹' : 'æ–°å¢è¡Œç¨‹' }}</h3>
                    
                    <div class="overflow-y-auto space-y-4 pr-1 scrollbar-hide flex-1">
                        <div>
                            <label class="text-xs text-p-apricot font-bold uppercase">æ™‚é–“</label>
                            <input v-model="modalData.time" type="text" class="w-full bg-white/10 border border-p-apricot/30 rounded-lg p-2 text-white focus:border-p-purple outline-none mt-1 transition-colors">
                        </div>
                        <div>
                            <label class="text-xs text-p-apricot font-bold uppercase">æ¨™é¡Œ</label>
                            <input v-model="modalData.title" type="text" class="w-full bg-white/10 border border-p-apricot/30 rounded-lg p-2 text-white focus:border-p-purple outline-none mt-1 transition-colors">
                        </div>
                        <div>
                            <label class="text-xs text-p-apricot font-bold uppercase">åœ°é» (å°èˆªç”¨)</label>
                            <input v-model="modalData.location" type="text" class="w-full bg-white/10 border border-p-apricot/30 rounded-lg p-2 text-white focus:border-p-purple outline-none mt-1 transition-colors">
                        </div>
                        <div>
                            <label class="text-xs text-p-apricot font-bold uppercase">åœ°å€ (é¡¯ç¤ºç”¨)</label>
                            <input v-model="modalData.addr" type="text" class="w-full bg-white/10 border border-p-apricot/30 rounded-lg p-2 text-white focus:border-p-purple outline-none mt-1 transition-colors">
                        </div>
                        <div>
                            <label class="text-xs text-p-apricot font-bold uppercase">åœ–ç‰‡ç¶²å€</label>
                            <input v-model="modalData.img" type="text" placeholder="https://..." class="w-full bg-white/10 border border-p-apricot/30 rounded-lg p-2 text-white focus:border-p-purple outline-none mt-1 transition-colors">
                        </div>
                        <div v-if="modalData.img" class="h-32 rounded-lg overflow-hidden border border-p-apricot/30">
                            <img :src="modalData.img" class="w-full h-full object-cover">
                        </div>
                        <div>
                            <label class="text-xs text-p-apricot font-bold uppercase">è©³ç´°æè¿°</label>
                            <textarea v-model="modalData.desc" rows="3" class="w-full bg-white/10 border border-p-apricot/30 rounded-lg p-2 text-white focus:border-p-purple outline-none mt-1 transition-colors"></textarea>
                        </div>
                    </div>

                    <div class="flex gap-3 mt-6 pt-4 border-t border-p-apricot/20">
                        <button v-if="isEditing" @click="deleteEvent" class="flex-1 py-3 rounded-xl bg-red-500/80 text-white font-bold hover:bg-red-500 transition-colors">åˆªé™¤</button>
                        <button @click="showModal = false" class="flex-1 py-3 rounded-xl bg-white/10 text-white font-bold hover:bg-white/20 transition-colors">å–æ¶ˆ</button>
                        <button @click="saveEvent" class="flex-1 py-3 rounded-xl bg-p-purple text-white font-bold hover:bg-white hover:text-p-purple shadow-lg shadow-p-purple/30 transition-all">å„²å­˜</button>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <script>
        const { createApp, ref, onMounted, nextTick, watch } = Vue;

        const myTripData = {
            title: "è–èª•ä¸Šæµ·ä¹‹æ—…", 
            shops: [
                { name: "å§¥å§¥å®¶ Grandmas", area: "å¤–ç˜", icon: "fa-utensils" },
                { name: "M Stand", area: "æ–°å¤©åœ°", icon: "fa-mug-hot" },
                { name: "Haus Nowhere", area: "æ·®æµ·ä¸­è·¯", icon: "fa-bag-shopping" },
                { name: "Peet's Coffee", area: "æ­¦åº·è·¯", icon: "fa-mug-saucer" }
            ],
            hotel: {
                name: "ä¸Šæµ·æ±éŒ¦æ±Ÿå¸Œçˆ¾é “é€¸æ—é…’åº—",
                engName: "DoubleTree by Hilton",
                address: "ä¸Šæµ·å¸‚æµ¦æ±æ–°å€æ±æ–¹è·¯889è™Ÿ",
                checkIn: "12æœˆ23æ—¥", checkOut: "12æœˆ26æ—¥",
                image: "https://images.unsplash.com/photo-1590490360182-c33d57733427?q=80&w=1000&auto=format&fit=crop"
            },
            flightOut: { from: "HKG", to: "PVG", date: "2025/12/23", no: "MU726", dep: "07:40", arr: "10:30", airline: "ä¸­åœ‹æ±æ–¹èˆªç©º" },
            flightIn: { from: "PVG", to: "HKG", date: "2025/12/26", no: "MU725", dep: "21:20", arr: "00:15", airline: "ä¸­åœ‹æ±æ–¹èˆªç©º" },
            days: [
                {
                    date: "12æœˆ23æ—¥ (äºŒ)", dateShort: "23", 
                    events: [
                        { id: 1, time: "10:30", title: "æŠµé”ä¸Šæµ·æµ¦æ±", location: "ä¸Šæµ·æµ¦æ±åœ‹éš›æ©Ÿå ´", desc: "å…¥å¢ƒæ‰‹çºŒã€é ˜å–è¡Œæã€‚", weather: "cloudy", temp: "8Â°C", img: "https://images.unsplash.com/photo-1474302770737-173ee21bab63?q=80&w=1000", addr: "æµ¦æ±æ–°å€" },
                        { id: 2, time: "15:00", title: "æµ¦æ±ç¾è¡“é¤¨", location: "æµ¦æ±ç¾è¡“é¤¨", desc: "æ¬£è³å»ºç¯‰ä¹‹ç¾ï¼Œç›´é¢å¤–ç˜ã€‚", weather: "cloudy", temp: "9Â°C", img: "https://images.unsplash.com/photo-1634351330397-6950295232a5?q=80&w=1000", addr: "æ¿±æ±Ÿå¤§é“2777è™Ÿ" },
                        { id: 3, time: "18:00", title: "åå…­é‹ªç¢¼é ­", location: "åå…­é‹ªç¢¼é ­", desc: "æ¬£è³é»ƒæµ¦æ±Ÿç’€ç’¨å¤œæ™¯ã€‚", weather: "clear", temp: "5Â°C", addr: "ä¸­å±±æ±äºŒè·¯531è™Ÿ", img: "https://images.unsplash.com/photo-1548658166-136d9f6a7df1?q=80&w=1000" }
                    ]
                },
                {
                    date: "12æœˆ24æ—¥ (ä¸‰)", dateShort: "24",
                    events: [
                        { id: 4, time: "10:00", title: "è±«åœ’ & åŸéšå»Ÿ", location: "è±«åœ’", desc: "æ±Ÿå—å¤å…¸åœ’æ—ã€‚", weather: "sunny", temp: "9Â°C", img: "https://images.unsplash.com/photo-1580910543239-166299d25725?q=80&w=1000", addr: "ç¦ä½‘è·¯168è™Ÿ" },
                        { id: 5, time: "14:30", title: "æ–°å¤©åœ°åŒ—é‡Œ", location: "ä¸Šæµ·æ–°å¤©åœ°", desc: "å¹³å®‰å¤œé€›è¡—ã€‚", weather: "sunny", temp: "10Â°C", img: "https://images.unsplash.com/photo-1548658827-63d0529d2b27?q=80&w=1000" },
                        { id: 6, time: "19:00", title: "å¹³å®‰å¤œæ™šé¤", location: "æ–°å¤©åœ°", desc: "è–èª•å¤§é¤ã€‚", weather: "clear", temp: "6Â°C", img: "https://images.unsplash.com/photo-1543007630-9710e4a00a20?q=80&w=1000" }
                    ]
                },
                {
                    date: "12æœˆ25æ—¥ (å››)", dateShort: "25",
                    events: [
                        { id: 7, time: "10:00", title: "æœ±å®¶è§’å¤é®", location: "æœ±å®¶è§’å¤é®", desc: "ä¸Šæµ·å¨å°¼æ–¯ã€‚", weather: "sunny", temp: "11Â°C", img: "https://images.unsplash.com/photo-1548956923-38c826922904?q=80&w=1000" },
                        { id: 8, time: "17:00", title: "è¿”å›å¸‚å€", location: "äººæ°‘å»£å ´", desc: "ä¼‘æ¯/æ™šé¤", img: "https://images.unsplash.com/photo-1505164294036-746a5f67a2cb?q=80&w=1000" }
                    ]
                },
                {
                    date: "12æœˆ26æ—¥ (äº”)", dateShort: "26",
                    events: [
                        { id: 9, time: "10:30", title: "æ­¦åº·è·¯ City Walk", location: "æ­¦åº·è·¯", desc: "æ³•ç§Ÿç•Œé¢¨æƒ…ã€‚", img: "https://images.unsplash.com/photo-1678786968037-33633667c427?q=80&w=1000" },
                        { id: 10, time: "14:00", title: "ç”°å­åŠ", location: "ç”°å­åŠ", desc: "å¼„å ‚æ–‡å‰µã€‚", img: "https://images.unsplash.com/photo-1558273643-979929281a8f?q=80&w=1000" },
                        { id: 11, time: "17:30", title: "å‰å¾€æ©Ÿå ´", location: "æµ¦æ±æ©Ÿå ´", desc: "è¿”ç¨‹", img: "https://images.unsplash.com/photo-1530521954074-e64f6810b32d?q=80&w=1000" }
                    ]
                }
            ]
        };

        createApp({
            setup() {
                const currentTab = ref('schedule');
                const appTitle = ref(myTripData.title);
                const currentDayIndex = ref(0);
                const myData = ref(myTripData); 
                const sortableList = ref(null);
                const showModal = ref(false);
                const isEditing = ref(false);
                const editingIdx = ref(-1);
                const modalData = ref({}); 

                const getWeatherIcon = (type) => {
                    const t = type ? type.toLowerCase() : '';
                    // æ›´æ–°å¤©æ°£åœ–æ¨™é¡è‰²ç‚ºé®®æ˜æè‰²
                    if (t.includes('sun') || t.includes('clear')) return 'fa-solid fa-sun text-p-apricot'; 
                    if (t.includes('cloud')) return 'fa-solid fa-cloud text-p-apricot/60';
                    return 'fa-solid fa-cloud-sun text-p-apricot';
                };

                const initSortable = () => {
                    if (sortableList.value) {
                        new Sortable(sortableList.value, {
                            animation: 150,
                            handle: '.glass-card', 
                            delay: 200, 
                            delayOnTouchOnly: true,
                            ghostClass: 'sortable-ghost',
                            dragClass: 'sortable-drag',
                            onEnd: (evt) => {
                                const item = myData.value.days[currentDayIndex.value].events.splice(evt.oldIndex, 1)[0];
                                myData.value.days[currentDayIndex.value].events.splice(evt.newIndex, 0, item);
                            }
                        });
                    }
                };

                watch([currentTab, currentDayIndex], async () => {
                    if (currentTab.value === 'schedule') {
                        await nextTick();
                        initSortable();
                    }
                });

                onMounted(() => {
                    initSortable();
                });

                const openAddModal = () => {
                    isEditing.value = false;
                    modalData.value = { time: "", title: "", location: "", desc: "", img: "", addr: "" };
                    showModal.value = true;
                };

                const openEditModal = (idx) => {
                    isEditing.value = true;
                    editingIdx.value = idx;
                    modalData.value = { ...myData.value.days[currentDayIndex.value].events[idx] };
                    showModal.value = true;
                };

                const saveEvent = () => {
                    const currentEvents = myData.value.days[currentDayIndex.value].events;
                    if (isEditing.value) {
                        currentEvents[editingIdx.value] = { ...modalData.value, id: currentEvents[editingIdx.value].id };
                    } else {
                        currentEvents.push({ ...modalData.value, id: Date.now() });
                    }
                    showModal.value = false;
                };

                const deleteEvent = () => {
                    if (confirm("ç¢ºå®šè¦åˆªé™¤æ­¤è¡Œç¨‹å—ï¼Ÿ")) {
                        myData.value.days[currentDayIndex.value].events.splice(editingIdx.value, 1);
                        showModal.value = false;
                    }
                };

                return { currentTab, appTitle, currentDayIndex, myData, getWeatherIcon, sortableList, showModal, isEditing, modalData, openAddModal, openEditModal, saveEvent, deleteEvent };
            }
        }).mount('#app');
    </script>
</body>
</html>
