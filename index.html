<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>ËÅñË™ï‰∏äÊµ∑‰πãÊóÖ 2025</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
    
    <link href="https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@500;700;900&family=Noto+Sans+SC:wght@900&family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        scheme1: { 
                            bg: '#0F172A',        
                            primary: '#FF7EE2',   
                            secondary: '#22D3EE', 
                            accent: '#FDE047',    
                            textMain: '#FFFFFF',
                            textSub: '#E2E8F0',
                            cardBg: 'rgba(255, 255, 255, 0.1)' 
                        }
                    },
                    fontFamily: { 
                        sans: ['Noto Sans TC', 'sans-serif'],
                        deco: ['Zen Maru Gothic', 'sans-serif'], 
                        heiti: ['Noto Sans SC', 'Heiti SC', 'SimHei', 'sans-serif']
                    }
                }
            }
        }
    </script>
    <style>
        html, body {
            height: 100%;
            height: 100dvh;
            overflow: hidden;
            overscroll-behavior: none;
            background-color: #0F172A;
            color: #FFFFFF;
            -webkit-user-select: none; /* Èò≤Ê≠¢Èï∑ÊåâÈÅ∏ÂèñÊñáÂ≠ó */
            user-select: none;
            -webkit-touch-callout: none; /* Èò≤Ê≠¢Èï∑ÊåâË∑≥Âá∫ÈÅ∏ÂñÆ */
        }
        
        #app {
            height: 100%;
            height: 100dvh;
            width: 100%;
            display: flex;
            justify-content: center;
        }

        .scrollbar-hide::-webkit-scrollbar { display: none; }
        .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }
        .animate-fade-in { animation: fadeIn 0.4s cubic-bezier(0.2, 0.8, 0.2, 1) forwards; }
        .animate-spin-slow { animation: spin 10s linear infinite; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        .shanghai-bg {
            background-color: #0F172A;
            background-image: 
                linear-gradient(to bottom, rgba(30, 27, 75, 0.2), rgba(15, 23, 42, 0.85)),
                url('https://images.unsplash.com/photo-1548266652-99cf27701ced?q=80&w=2670&auto=format&fit=crop'); 
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
        }

        .glass-card {
            background: rgba(255, 255, 255, 0.03); 
            backdrop-filter: blur(8px);             
            border: 1px solid rgba(255, 255, 255, 0.12); 
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
        }
        
        .glass-nav {
            background: rgba(15, 23, 42, 0.85); 
            backdrop-filter: blur(20px);
            border-top: 1px solid rgba(255, 255, 255, 0.15);
            box-shadow: 0 -4px 30px rgba(0, 0, 0, 0.6);
        }

        .glass-header {
            background: rgba(15, 23, 42, 0.15); 
            backdrop-filter: blur(6px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .glass-deco {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(8px);
            border: 1px solid rgba(255, 255, 255, 0.4);
        }

        .glass-modal {
            background: rgba(15, 23, 42, 0.85); 
            backdrop-filter: blur(25px);
        }

        .text-shadow-sm { text-shadow: 0 1px 3px rgba(0,0,0,0.6); }

        /* --- ÊãñÊõ≥ÁâπÊïàÊ®£Âºè --- */
        
        /* ÊãñÊõ≥ÊôÇÔºåÂéü‰æÜ‰ΩçÁΩÆÁïô‰∏ãÁöÑÁ©∫‰Ωç */
        .sortable-ghost { 
            opacity: 0.1; 
            border: 2px dashed rgba(255, 126, 226, 0.3);
            border-radius: 0.75rem;
        }

        /* Ê≠£Âú®Ë¢´ÊãñÊõ≥ÁöÑÁâ©‰ª∂ (Êá∏ÊµÆÊïàÊûú) */
        .sortable-drag { 
            cursor: grabbing; 
            opacity: 1 !important;
            background: rgba(22, 30, 50, 0.95) !important; /* Ê∑±Ëâ≤ËÉåÊôØÈò≤ÈÄèË¶ñ */
            backdrop-filter: blur(10px);
            transform: scale(1.05); /* Á®çÂæÆÊîæÂ§ß */
            box-shadow: 
                0 20px 25px -5px rgba(0, 0, 0, 0.5), 
                0 0 0 1px rgba(255, 126, 226, 0.5); /* È´ò‰∫ÆÈÇäÊ°Ü */
            z-index: 9999 !important;
            border-radius: 0.75rem;
        }
    </style>
</head>
<body>
    <div id="app" class="font-sans font-medium text-scheme1-textMain">
        <div class="w-full max-w-md h-full relative shadow-2xl flex flex-col overflow-hidden bg-transparent">
            
            <div class="absolute inset-0 z-0 shanghai-bg pointer-events-none"></div>

            <header class="glass-header text-white p-3 pt-5 pb-2 shadow-sm z-10 flex justify-between items-center relative flex-shrink-0">
                <div class="relative z-10 flex flex-col justify-center h-full w-full pl-2">
                    <h2 class="text-xs tracking-widest opacity-90 text-scheme1-secondary mb-0.5 font-sans font-bold uppercase drop-shadow-md">Wayne & Chloe | Shanghai 2025</h2>
                    <h1 class="text-2xl font-deco tracking-widest text-white drop-shadow-lg font-medium mt-0">
                        {{ myData.title }}
                    </h1>
                </div>
                <div class="w-9 h-9 glass-deco rounded-full flex items-center justify-center shadow-inner flex-shrink-0 mr-2 border border-white/30">
                    <i class="fa-solid fa-plane-up text-white animate-bounce text-xs drop-shadow-md"></i>
                </div>
            </header>

            <main class="flex-1 overflow-y-auto scrollbar-hide p-4 pb-24 space-y-5 relative z-10">
                
                <div v-if="currentTab === 'flight'" class="animate-fade-in space-y-4">
                    <h3 class="font-bold text-xl pl-3 border-l-4 border-scheme1-primary text-white text-shadow-sm font-deco tracking-wide">‚úàÔ∏è Ëà™Áè≠Ë≥áË®ä</h3>
                    
                    <div class="glass-card rounded-2xl p-4 relative overflow-hidden group">
                        <div class="absolute top-3 left-3 bg-scheme1-primary/20 border border-scheme1-primary/80 text-scheme1-primary text-xs px-2.5 py-0.5 rounded-full font-bold tracking-widest">ÂéªÁ®ã OUTBOUND</div>
                        <div class="mt-8 flex justify-between items-center mb-4">
                            <div class="text-center w-1/3"><div class="text-5xl font-black text-white tracking-tighter drop-shadow-lg font-heiti">{{ myData.flightOut.from }}</div><div class="text-sm text-scheme1-accent font-bold mt-1 tracking-wide">È¶ôÊ∏Ø T1</div></div>
                            <div class="flex-1 px-2 text-center flex flex-col items-center"><div class="text-xs text-scheme1-primary font-bold">{{ myData.flightOut.airline }}</div><i class="fa-solid fa-plane text-white text-xl block my-1 drop-shadow-md"></i><div class="border-b-2 border-dotted border-white/40 w-full h-1"></div><div class="text-xs text-scheme1-textSub mt-1 font-bold">{{ myData.flightOut.no }}</div></div>
                            <div class="text-center w-1/3"><div class="text-5xl font-black text-white tracking-tighter drop-shadow-lg font-heiti">{{ myData.flightOut.to }}</div><div class="text-sm text-scheme1-accent font-bold mt-1 tracking-wide">‰∏äÊµ∑Êµ¶Êù± T1</div></div>
                        </div>
                        <div class="bg-white/5 rounded-xl p-3 flex justify-between items-start text-sm border border-white/20">
                            <div><span class="text-xs text-scheme1-textSub/80 font-bold block">Date</span>{{ myData.flightOut.date }}</div>
                            <div class="flex gap-4">
                                <div class="text-right"><span class="text-xs text-scheme1-textSub/80 font-bold block">Dep</span><span class="font-bold text-scheme1-primary text-xl">{{ myData.flightOut.dep }}</span></div>
                                <div class="text-right"><span class="text-xs text-scheme1-textSub/80 font-bold block">Arr</span><span class="font-bold text-scheme1-primary text-xl">{{ myData.flightOut.arr }}</span></div>
                            </div>
                        </div>
                    </div>

                    <div class="glass-card rounded-2xl p-4 relative overflow-hidden group">
                        <div class="absolute top-3 left-3 bg-scheme1-secondary/20 border border-scheme1-secondary/80 text-scheme1-secondary text-xs px-2.5 py-0.5 rounded-full font-bold tracking-widest">ÂõûÁ®ã INBOUND</div>
                        <div class="mt-8 flex justify-between items-center mb-4">
                            <div class="text-center w-1/3"><div class="text-5xl font-black text-white tracking-tighter drop-shadow-lg font-heiti">{{ myData.flightIn.from }}</div><div class="text-sm text-scheme1-accent font-bold mt-1 tracking-wide">‰∏äÊµ∑Êµ¶Êù± T1</div></div>
                            <div class="flex-1 px-2 text-center flex flex-col items-center"><div class="text-xs text-scheme1-secondary font-bold">{{ myData.flightIn.airline }}</div><i class="fa-solid fa-plane text-white text-xl block my-1 rotate-180 drop-shadow-md"></i><div class="border-b-2 border-dotted border-white/40 w-full h-1"></div><div class="text-xs text-scheme1-textSub mt-1 font-bold">{{ myData.flightIn.no }}</div></div>
                            <div class="text-center w-1/3"><div class="text-5xl font-black text-white tracking-tighter drop-shadow-lg font-heiti">{{ myData.flightIn.to }}</div><div class="text-sm text-scheme1-accent font-bold mt-1 tracking-wide">È¶ôÊ∏Ø T1</div></div>
                        </div>
                        <div class="bg-white/5 rounded-xl p-3 flex justify-between items-start text-sm border border-white/20">
                            <div><span class="text-xs text-scheme1-textSub/80 font-bold block">Date</span>{{ myData.flightIn.date }}</div>
                            <div class="flex gap-4">
                                <div class="text-right"><span class="text-xs text-scheme1-textSub/80 font-bold block">Dep</span><span class="font-bold text-scheme1-secondary text-xl">{{ myData.flightIn.dep }}</span></div>
                                <div class="text-right"><span class="text-xs text-scheme1-textSub/80 font-bold block">Arr</span><span class="font-bold text-scheme1-secondary text-xl">{{ myData.flightIn.arr }}</span><span class="text-[10px] text-scheme1-primary block mt-0.5 font-bold">+1 Day</span></div>
                            </div>
                        </div>
                    </div>

                    <div class="glass-card rounded-xl p-4">
                        <h4 class="text-base font-bold text-white mb-3 flex items-center text-shadow-sm"><i class="fa-solid fa-suitcase-rolling mr-2 text-scheme1-accent"></i> Ë°åÊùéÈôêÈ°ç</h4>
                        <div class="flex flex-col gap-3">
                            <div class="bg-white/5 rounded-lg p-3 flex items-center shadow-sm border border-white/10">
                                <div class="w-10 text-center flex-shrink-0"><i class="fa-solid fa-suitcase text-scheme1-primary text-2xl drop-shadow-md"></i></div>
                                <div class="flex-1 ml-2 border-l border-white/20 pl-3">
                                    <div class="flex justify-between items-center"><span class="font-bold text-white text-sm">Ë®óÈÅãË°åÊùé</span><span class="text-[10px] bg-scheme1-primary/20 text-scheme1-primary border border-scheme1-primary/40 px-2 py-0.5 rounded shadow-sm font-bold">1‰ª∂</span></div>
                                    <div class="text-xs text-scheme1-textSub mt-1 font-bold"><i class="fa-solid fa-weight-scale text-[10px] mr-1"></i>23kg <span class="mx-1 text-white/30">|</span> 158cm</div>
                                </div>
                            </div>
                            <div class="bg-white/5 rounded-lg p-3 flex items-center shadow-sm border border-white/10">
                                <div class="w-10 text-center flex-shrink-0"><i class="fa-solid fa-briefcase text-scheme1-secondary text-2xl drop-shadow-md"></i></div>
                                <div class="flex-1 ml-2 border-l border-white/20 pl-3">
                                    <div class="flex justify-between items-center"><span class="font-bold text-white text-sm">ÊâãÊèêË°åÊùé</span><span class="text-[10px] bg-scheme1-secondary/20 text-scheme1-secondary border border-scheme1-secondary/40 px-2 py-0.5 rounded shadow-sm font-bold">1‰ª∂</span></div>
                                    <div class="text-xs text-scheme1-textSub mt-1 font-bold">7kg <span class="mx-1 text-white/30">|</span> 20x40x55cm</div>
                                </div>
                            </div>
                             <div class="bg-white/5 rounded-lg p-3 flex items-center shadow-sm border border-white/10">
                                <div class="w-10 text-center flex-shrink-0"><i class="fa-solid fa-bag-shopping text-scheme1-accent text-2xl drop-shadow-md"></i></div>
                                <div class="flex-1 ml-2 border-l border-white/20 pl-3">
                                    <div class="flex justify-between items-center"><span class="font-bold text-white text-sm">Èö®Ë∫´Áâ©ÂìÅ</span><span class="text-[10px] bg-scheme1-accent/20 text-scheme1-accent border border-scheme1-accent/40 px-2 py-0.5 rounded shadow-sm font-bold">1‰ª∂</span></div>
                                    <div class="text-xs text-scheme1-textSub mt-1 font-bold">Â∞èÂûãÊâãË¢ã / Á≠ÜÈõªÂåÖ</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div v-if="currentTab === 'schedule'" class="animate-fade-in space-y-4">
                    
                    <div class="grid grid-cols-4 gap-2 px-1">
                        <button v-for="(day, index) in myData.days" :key="index" @click="currentDayIndex = index" 
                            :class="currentDayIndex === index ? 'bg-scheme1-primary/90 text-white shadow-[0_0_15px_rgba(255,126,226,0.6)] border-transparent scale-105' : 'glass-card text-white/80 border-white/20'"
                            class="py-2 rounded-xl flex flex-col items-center justify-center transition-all duration-300 backdrop-blur-sm h-full">
                            <div class="flex flex-col items-center leading-none text-white w-full gap-0.5">
                                <span class="text-[10px] uppercase tracking-wider font-bold opacity-80 mb-0.5">DAY {{ index + 1 }}</span>
                                <span class="text-3xl font-black drop-shadow-sm -my-1">{{ day.dayNum }}</span>
                                <span class="text-[10px] font-bold opacity-80 mt-0.5">{{ day.weekday }}</span>
                            </div>
                        </button>
                    </div>

                    <div>
                        <h3 class="font-bold text-lg mb-4 text-white flex items-center justify-between opacity-90 pl-1 text-shadow-sm">
                            <div><span class="text-scheme1-primary mr-2"><i class="fa-solid fa-calendar-day"></i></span>{{ myData.days[currentDayIndex].date }}</div>
                            <span class="text-[10px] bg-white/10 px-2 py-1 rounded text-gray-300"><i class="fa-solid fa-fingerprint mr-1"></i>Èï∑ÊåâÂç°ÁâáÊµÆËµ∑ÂæåÊãñÊõ≥</span>
                        </h3>
                        
                        <div class="relative pl-4">
                            <div class="absolute left-[3.5px] top-2 bottom-0 w-[2px] bg-white/20 rounded-full"></div>
                            
                            <div ref="sortableList" class="space-y-3">
                                <div v-for="(item, idx) in myData.days[currentDayIndex].events" :key="item.id" 
                                     class="relative group select-none transition-transform duration-200"
                                     @click="openEditModal(idx)">
                                    
                                    <div class="absolute -left-[17px] top-3 w-3 h-3 bg-scheme1-bg border-[3px] border-scheme1-primary rounded-full z-10 shadow-sm pointer-events-none"></div>
                                    
                                    <div class="glass-card rounded-xl p-0 transition-all duration-300 relative overflow-hidden z-0 hover:bg-white/10 hover:border-scheme1-primary/40 active:scale-95">
                                        
                                        <div v-if="item.img" class="h-24 w-full relative overflow-hidden pointer-events-none">
                                            <img :src="item.img" class="absolute inset-0 w-full h-full object-cover opacity-90">
                                            <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-black/30 to-transparent"></div>
                                            <div class="absolute bottom-2 left-3 right-3 flex justify-between items-end z-10">
                                                <div class="flex items-center gap-2">
                                                    <span class="bg-scheme1-primary text-white font-bold text-sm px-2 py-0.5 rounded shadow-[0_0_10px_#FF7EE2]">{{ item.time }}</span>
                                                    <div class="flex items-center text-white text-xs gap-1 font-bold" v-if="item.weather">
                                                        <i :class="getWeatherIcon(item.weather)"></i><span>{{ item.temp }}</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div v-else class="p-3 pb-0 flex justify-between items-center mb-1 pointer-events-none">
                                            <span class="bg-scheme1-primary/20 text-scheme1-primary font-bold text-sm px-2.5 py-0.5 rounded-full border border-scheme1-primary/30 shadow-[0_0_10px_rgba(255,126,226,0.4)]">{{ item.time }}</span>
                                            <div class="flex items-center text-scheme1-textSub text-xs gap-1.5 font-bold" v-if="item.weather">
                                                <i :class="getWeatherIcon(item.weather)"></i><span>{{ item.temp }}</span>
                                            </div>
                                        </div>
                                        
                                        <div class="p-3 pt-1 relative pointer-events-none">
                                            <h4 class="font-bold text-base text-white mb-0.5 drop-shadow-md">{{ item.title }}</h4>
                                            
                                            <p class="text-xs text-scheme1-textSub/90 mb-0.5 leading-snug font-bold line-clamp-2">{{ item.desc }}</p>
                                            
                                            <div class="flex justify-between items-end mt-0.5">
                                                <p v-if="item.location" class="text-sm text-scheme1-secondary flex-1 mr-2 leading-tight"><i class="fa-solid fa-location-dot mr-1 text-xs drop-shadow-[0_0_5px_rgba(34,211,238,1)]"></i>{{ item.location }}</p>
                                                
                                                <a :href="'https://www.google.com/maps/search/?api=1&query=' + item.location" target="_blank" @click.stop class="w-10 h-10 rounded-full bg-white/10 flex items-center justify-center text-scheme1-secondary hover:bg-scheme1-secondary hover:text-white transition-colors shadow-sm border border-white/20 flex-shrink-0 pointer-events-auto">
                                                    <i class="fa-solid fa-diamond-turn-right text-sm"></i>
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <button @click="openAddModal" class="w-full py-3 mt-4 mb-4 rounded-xl border-2 border-dashed border-scheme1-primary/30 text-scheme1-primary/70 hover:bg-scheme1-primary/10 hover:border-scheme1-primary hover:text-scheme1-primary transition-all font-bold flex items-center justify-center gap-2">
                                <i class="fa-solid fa-plus"></i> Êñ∞Â¢ûË°åÁ®ã
                            </button>
                        </div>
                    </div>
                </div>

                <div v-if="currentTab === 'map'" class="animate-fade-in h-full flex flex-col items-center justify-center pt-10 pb-20">
                    <div class="glass-card p-6 rounded-3xl mb-6 animate-bounce relative backdrop-blur-xl border border-scheme1-primary/40 shadow-[0_0_30px_rgba(255,126,226,0.3)]">
                         <div class="absolute inset-0 bg-scheme1-primary/10 rounded-3xl blur-xl -z-10"></div>
                        <i class="fa-solid fa-map-location-dot text-7xl text-scheme1-primary drop-shadow-[0_0_15px_rgba(255,126,226,0.6)]"></i>
                    </div>
                    <h3 class="font-bold text-2xl text-white mb-2 drop-shadow-sm text-shadow-sm font-deco tracking-widest">üó∫Ô∏è Êé¢Á¥¢‰∏äÊµ∑</h3>
                    <p class="text-scheme1-textSub text-base text-center leading-relaxed font-bold">ÈªûÊìäË°åÁ®ã‰∏≠ÁöÑÂú∞Èªû<br>ÈñãÂïü Google Maps Â∞éËà™</p>
                </div>

                <div v-if="currentTab === 'shops'" class="animate-fade-in">
                    <h3 class="font-bold text-xl mb-4 pl-3 border-l-4 border-scheme1-primary text-white opacity-90 text-shadow-sm font-deco tracking-wide">üõçÔ∏è ÂøÖÈÄõÂ∫óËàñ & ÁæéÈ£ü</h3>
                    
                    <div class="grid grid-cols-2 gap-4">
                        <div v-for="(shop, idx) in myData.shops" :key="idx" 
                             @click="openShopDetails(shop)"
                             class="glass-card rounded-2xl p-4 flex flex-col items-center justify-center text-center relative overflow-hidden group hover:border-scheme1-primary/50 transition-colors select-none cursor-pointer aspect-square">
                            
                            <div :class="getShopIconColor(shop.color)" class="w-10 h-10 rounded-full bg-white/5 border border-white/20 flex items-center justify-center text-lg shadow-inner mb-2 group-hover:scale-110 transition-transform">
                                <i :class="['fa-solid', shop.icon]"></i>
                            </div>
                            
                            <div class="mb-2 w-full">
                                <h4 class="font-bold text-white text-base leading-tight drop-shadow-sm">
                                    {{ getShopNameParts(shop.name).main }}
                                </h4>
                                <p v-if="getShopNameParts(shop.name).sub" class="text-xs text-scheme1-textSub/90 mt-0.5">
                                    {{ getShopNameParts(shop.name).sub }}
                                </p>
                            </div>

                            <div class="flex items-center justify-center text-[10px] text-scheme1-secondary font-bold bg-white/5 px-2 py-1 rounded-full mb-2 w-full">
                                <i class="fa-solid fa-clock mr-1.5"></i>
                                <span class="truncate">{{ getSimpleHours(shop.hours) }}</span>
                            </div>
                            
                            <span v-if="shop.tag" class="text-[10px] bg-scheme1-primary/10 text-scheme1-primary px-2 py-0.5 rounded-full border border-scheme1-primary/20 font-bold">{{ shop.tag }}</span>
                        </div>
                    </div>
                </div>

                <div v-if="currentTab === 'hotel'" class="animate-fade-in space-y-4">
                    <h3 class="font-bold text-xl pl-3 border-l-4 border-scheme1-secondary text-white opacity-90 text-shadow-sm font-deco tracking-wide">üè® ‰ΩèÂÆøË≥áË®ä</h3>
                    <div class="glass-card rounded-2xl overflow-hidden">
                        <div class="h-48 relative flex items-end overflow-hidden group">
                            <img :src="myData.hotel.image" class="absolute inset-0 w-full h-full object-cover transition-transform duration-700 group-hover:scale-110 opacity-70" alt="Hotel Room">
                            <div class="absolute inset-0 bg-gradient-to-t from-scheme1-bg via-scheme1-bg/40 to-transparent"></div>
                            <div class="relative z-10 p-5 w-full text-white">
                                <div class="absolute top-4 right-4 bg-black/40 backdrop-blur-md text-white/90 text-xs font-bold px-3 py-1 rounded-full shadow-lg border border-white/10 select-none">
                                    4Êôö ‚ú®
                                </div>
                                <h2 class="text-2xl font-black leading-tight mb-1 text-white shadow-sm text-shadow-sm">{{ myData.hotel.name }}</h2>
                                <p class="text-sm text-white/90 font-bold truncate">{{ myData.hotel.engName }}</p>
                            </div>
                        </div>
                        <div class="p-5">
                            <div class="flex gap-2 mb-4 overflow-x-auto scrollbar-hide">
                                <span class="text-xs bg-white/5 text-scheme1-textSub px-2.5 py-1.5 rounded-md flex-shrink-0 border border-white/20 font-bold hover:bg-white/10 transition-colors"><i class="fa-solid fa-dumbbell mr-1"></i>ÂÅ•Ë∫´Êàø</span>
                                <span class="text-xs bg-white/5 text-scheme1-textSub px-2.5 py-1.5 rounded-md flex-shrink-0 border border-white/20 font-bold hover:bg-white/10 transition-colors"><i class="fa-solid fa-person-swimming mr-1"></i>ÊÅÜÊ∫´Ê≥≥Ê±†</span>
                                <span class="text-xs bg-white/5 text-scheme1-textSub px-2.5 py-1.5 rounded-md flex-shrink-0 border border-white/20 font-bold hover:bg-white/10 transition-colors"><i class="fa-solid fa-wifi mr-1"></i>ÂÖçË≤ªWiFi</span>
                            </div>
                            <div class="bg-white/5 rounded-xl p-3 mb-4 flex items-start border border-white/10">
                                <i class="fa-solid fa-location-dot text-scheme1-secondary mt-1 mr-2.5 text-lg drop-shadow-[0_0_5px_rgba(34,211,238,0.8)]"></i>
                                <div class="flex-1">
                                    <p class="text-base text-white font-bold mb-1 leading-snug">{{ myData.hotel.address }}</p>
                                    <a :href="'https://www.google.com/maps/search/?api=1&query=' + myData.hotel.name" target="_blank" class="text-xs text-scheme1-primary font-bold flex items-center gap-1 hover:underline">
                                        ÈñãÂïü Google Maps <i class="fa-solid fa-arrow-up-right-from-square text-[10px]"></i>
                                    </a>
                                </div>
                            </div>
                            <div class="grid grid-cols-2 gap-3 text-center">
                                <div class="bg-white/5 rounded-lg p-3 border border-white/10">
                                    <div class="text-xs text-scheme1-textSub mb-1 uppercase tracking-wide font-black">Check-in</div>
                                    <div class="font-bold text-scheme1-primary text-xl">14:00</div>
                                    <div class="text-xs text-scheme1-textSub mt-1 font-bold">{{ myData.hotel.checkIn }}</div>
                                </div>
                                <div class="bg-white/5 rounded-lg p-3 border border-white/10">
                                    <div class="text-xs text-scheme1-textSub mb-1 uppercase tracking-wide font-black">Check-out</div>
                                    <div class="font-bold text-scheme1-secondary text-xl">12:00</div>
                                    <div class="text-xs text-scheme1-textSub mt-1 font-bold">{{ myData.hotel.checkOut }}</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </main>

            <div class="fixed bottom-0 left-0 right-0 z-50 flex justify-center">
                <nav class="glass-nav w-full h-16 px-1 flex justify-evenly items-center rounded-t-[2rem] pb-1 relative flex-shrink-0 animate-fade-in">
                    <button @click="currentTab = 'flight'" :class="currentTab === 'flight' ? 'text-scheme1-primary drop-shadow-[0_0_8px_rgba(255,126,226,0.8)]' : 'text-scheme1-textSub/40 hover:text-scheme1-textSub'" class="flex flex-col items-center w-14 transition-colors">
                        <i class="fa-solid fa-plane-departure text-2xl mb-0.5"></i><span class="text-[10px] tracking-wide font-bold">Ëà™Áè≠</span>
                    </button>
                    <button @click="currentTab = 'schedule'" :class="currentTab === 'schedule' ? 'text-scheme1-primary drop-shadow-[0_0_8px_rgba(255,126,226,0.8)]' : 'text-scheme1-textSub/40 hover:text-scheme1-textSub'" class="flex flex-col items-center w-14 transition-colors">
                        <i class="fa-solid fa-clipboard-list text-2xl mb-0.5"></i><span class="text-[10px] tracking-wide font-bold">Ë°åÁ®ã</span>
                    </button>
                    <div class="-mt-8 relative z-10">
                        <button @click="currentTab = 'map'" class="bg-scheme1-bg text-scheme1-primary w-14 h-14 rounded-full shadow-[0_0_20px_rgba(255,126,226,0.4)] border-2 border-scheme1-primary/50 flex items-center justify-center backdrop-blur-sm transform active:scale-95 transition-all">
                            <i class="fa-solid fa-map text-3xl animate-pulse drop-shadow-[0_0_5px_rgba(255,126,226,1)]"></i>
                        </button>
                    </div>
                    <button @click="currentTab = 'shops'" :class="currentTab === 'shops' ? 'text-scheme1-primary drop-shadow-[0_0_8px_rgba(255,126,226,0.8)]' : 'text-scheme1-textSub/40 hover:text-scheme1-textSub'" class="flex flex-col items-center w-14 transition-colors">
                        <i class="fa-solid fa-store text-2xl mb-0.5"></i><span class="text-[10px] tracking-wide font-bold">Â∫óËàñ</span>
                    </button>
                    <button @click="currentTab = 'hotel'" :class="currentTab === 'hotel' ? 'text-scheme1-primary drop-shadow-[0_0_8px_rgba(255,126,226,0.8)]' : 'text-scheme1-textSub/40 hover:text-scheme1-textSub'" class="flex flex-col items-center w-14 transition-colors">
                        <i class="fa-solid fa-bed text-2xl mb-0.5"></i><span class="text-[10px] tracking-wide font-bold">‰ΩèÂÆø</span>
                    </button>
                </nav>
            </div>
        </div>
    </div>

    <script>
        const { createApp, ref, nextTick, watch, onMounted } = Vue;

        createApp({
            setup() {
                const currentTab = ref('schedule');
                const currentDayIndex = ref(0);
                
                // Sortable Áõ∏ÈóúËÆäÊï∏
                const sortableList = ref(null);
                const sortableInstance = ref(null);

                const myData = ref({
                    title: 'Xmas Shanghai',
                    flightOut: { from: 'HKG', to: 'PVG', airline: 'CX', no: '368', date: 'Dec 24', dep: '09:30', arr: '12:05' },
                    flightIn: { from: 'PVG', to: 'HKG', airline: 'CX', no: '367', date: 'Dec 28', dep: '13:20', arr: '16:05' },
                    days: [
                        { dayNum: '24', weekday: 'TUE', date: '12.24 Day 1', events: [
                            { id: 1, time: '12:05', title: 'ÊäµÈÅî‰∏äÊµ∑Êµ¶Êù±', desc: 'ÂÖ•Â¢É„ÄÅÈ†òÂèñË°åÊùé„ÄÅÊê≠‰πòÁ£ÅÊµÆÂàóËªä', location: 'PVG T1', weather: 'sunny', temp: '5¬∞C' },
                            { id: 2, time: '14:00', title: 'È£ØÂ∫ó Check-in', desc: 'Ëæ¶ÁêÜÂÖ•‰ΩèÔºåÊîæ‰∏ãË°åÊùé‰ºëÊÅØÁâáÂàª', location: 'The Puli Hotel', weather: 'cloudy', temp: '6¬∞C' },
                            { id: 3, time: '16:00', title: 'ÈùúÂÆâÂØ∫Êï£Ê≠•', desc: 'Âë®ÈÇäÈÄõË°óÔºåÂòâÈáå‰∏≠ÂøÉÔºåÂèÉËßÄËóçÁì∂ÂíñÂï°', location: 'JingAn Temple', weather: 'cloudy', temp: '5¬∞C' },
                            { id: 4, time: '18:30', title: 'ÊôöÈ§êÔºöÊ¶ÆÂØì', desc: 'Á±≥ÂÖ∂Êûó‰∏ÄÊòüÊú¨Âπ´ËèúÔºåÈúÄÊèêÂâçÈ†êÁ¥Ñ', location: 'West Nanjing Rd', img: 'https://images.unsplash.com/photo-1559339352-11d035aa65de?q=80&w=1974&auto=format&fit=crop' }
                        ]},
                        { dayNum: '25', weekday: 'WED', date: '12.25 Day 2', events: [
                            { id: 5, time: '10:00', title: 'Â§ñÁÅòÊï£Ê≠•', desc: 'Ê¨£Ë≥ûËê¨ÂúãÂª∫ÁØâÁæ§ÔºåÊãçÁÖßÁïôÂøµ', location: 'The Bund', weather: 'sunny', temp: '3¬∞C' },
                            { id: 6, time: '12:30', title: 'ÂçàÈ§êÔºöUltraviolet', desc: 'ÊÑüÂÆòÈ§êÂª≥È´îÈ©ó (È†êÁ¥ÑÂà∂)', location: 'Secret Location' },
                            { id: 7, time: '15:30', title: 'Êñ∞Â§©Âú∞', desc: 'Áü≥Â∫´ÈñÄÂª∫ÁØâÔºå‰∏ãÂçàËå∂', location: 'Xintiandi', weather: 'cloudy', temp: '4¬∞C' }
                        ]},
                        { dayNum: '26', weekday: 'THU', date: '12.26 Day 3', events: [
                            { id: 8, time: '11:00', title: 'Ê≠¶Â∫∑Ë∑Ø', desc: 'Á∂≤Á¥ÖË°óÈÅìÔºåÊ≠¶Â∫∑Â§ßÊ®ì', location: 'Wukang Rd' }
                        ]},
                        { dayNum: '27', weekday: 'FRI', date: '12.27 Day 4', events: [
                             { id: 9, time: '10:00', title: 'Ëø™Â£´Â∞ºÊ®ÇÂúí', desc: 'ËÅñË™ïÁâπÂà•ÈÅäË°åËàáÁÖôÁÅ´', location: 'Disney Resort', img: 'https://images.unsplash.com/photo-1559349887-217743936999?q=80&w=2670&auto=format&fit=crop' }
                        ]}
                    ],
                    shops: [
                        { name: 'HARMAY Ë©±Ê¢Ö', icon: 'bag-shopping', color: 'gray', hours: '10:00-22:00', tag: 'ÁæéÂ¶ùÈõÜÂêà' },
                        { name: 'Haus Shanghai', icon: 'glasses', color: 'blue', hours: '11:00-21:00', tag: 'Gentle Monster' },
                        { name: 'Labelhood', icon: 'shirt', color: 'gray', hours: '12:00-20:00', tag: 'Ë®≠Ë®àÂ∏´ÈÅ∏ÂìÅ' },
                        { name: 'Alimentari', icon: 'utensils', color: 'gray', hours: '09:00-23:00', tag: 'Áæ©ÂºèÈõúË≤®' }
                    ],
                    hotel: { name: 'The Puli Hotel', engName: 'The Puli Hotel and Spa', address: '1 Changde Road, JingAn', checkIn: 'Dec 24', checkOut: 'Dec 28', image: 'https://images.unsplash.com/photo-1566073771259-6a8506099945?q=80&w=2670&auto=format&fit=crop' }
                });

                // ÂàùÂßãÂåñ Sortable ÂäüËÉΩ
                const initSortable = () => {
                    // Â¶ÇÊûúÂ∑≤Â≠òÂú®ÂØ¶‰æãÔºåÂÖàÈä∑ÊØÄÈÅøÂÖçÈáçË§áÁ∂ÅÂÆö
                    if (sortableInstance.value) {
                        sortableInstance.value.destroy();
                        sortableInstance.value = null;
                    }

                    // Á≠âÂæÖ DOM Êõ¥Êñ∞ÂæåÁ∂ÅÂÆö
                    nextTick(() => {
                        const el = sortableList.value;
                        if (!el) return;

                        sortableInstance.value = new Sortable(el, {
                            animation: 250,
                            delay: 350,          // Èï∑Êåâ 350ms ÂæåËß∏ÁôºÊãñÊõ≥
                            delayOnTouchOnly: true, // ÂÉÖÂú®Ëß∏ÊéßË£ùÁΩÆÂïüÁî®Èï∑Êåâ
                            ghostClass: 'sortable-ghost', // ÊãñÊõ≥ÊôÇÂéü‰ΩçÁΩÆÁöÑÊ®£Âºè
                            dragClass: 'sortable-drag',   // ÊãñÊõ≥‰∏≠Âç°ÁâáÁöÑÊ®£Âºè
                            forceFallback: true, // Âº∑Âà∂‰ΩøÁî® fallbackÔºåËÆì CSS transform ÁîüÊïà
                            onChoose: () => {
                                // Áï∂Èï∑ÊåâÈÅ∏ÂèñÊàêÂäüÊôÇÔºåÊâãÊ©üÈúáÂãï
                                if (navigator.vibrate) navigator.vibrate(50);
                            },
                            onEnd: (evt) => {
                                // ÊãñÊõ≥ÁµêÊùüÔºåÊõ¥Êñ∞ Vue Êï∏ÊìöÈ†ÜÂ∫è
                                const dayEvents = myData.value.days[currentDayIndex.value].events;
                                const item = dayEvents.splice(evt.oldIndex, 1)[0];
                                dayEvents.splice(evt.newIndex, 0, item);
                            }
                        });
                    });
                };

                // Áï∂ÂàÜÈ†ÅÂàáÊèõÊàñÂ§©Êï∏ÂàáÊèõÊôÇÔºåÈáçÊñ∞ÂàùÂßãÂåñÊãñÊõ≥ÂäüËÉΩ
                watch([currentTab, currentDayIndex], ([newTab]) => {
                    if (newTab === 'schedule') {
                        initSortable();
                    }
                });

                // ÁµÑ‰ª∂ÊéõËºâÊôÇÂàùÂßãÂåñ
                onMounted(() => {
                    if (currentTab.value === 'schedule') {
                        initSortable();
                    }
                });

                const getShopIconColor = (color) => {
                    const map = { gray: 'text-gray-400', blue: 'text-blue-400' };
                    return map[color] || 'text-white';
                };

                const getShopNameParts = (name) => {
                    if(name.includes(' ')){
                         const [main, ...sub] = name.split(' ');
                         return { main, sub: sub.join(' ') };
                    }
                    return { main: name, sub: '' };
                };

                const getSimpleHours = (hours) => {
                     return hours.replace(/:00/g, '');
                };
                
                const getWeatherIcon = (w) => {
                    const map = { sunny: 'fa-solid fa-sun text-yellow-400', cloudy: 'fa-solid fa-cloud text-gray-300', rain: 'fa-solid fa-cloud-rain text-blue-300' };
                    return map[w] || '';
                };

                const openAddModal = () => {
                    alert('Êñ∞Â¢ûÂäüËÉΩÔºöÈªûÊìäÂæåÂΩàÂá∫Ë°®ÂñÆ');
                };

                const openEditModal = (idx) => {
                    console.log('Open edit for', idx);
                };

                const openShopDetails = (shop) => {
                    console.log('Shop', shop.name);
                };

                return {
                    currentTab,
                    currentDayIndex,
                    myData,
                    sortableList,
                    getShopIconColor,
                    getShopNameParts,
                    getSimpleHours,
                    getWeatherIcon,
                    openAddModal,
                    openEditModal,
                    openShopDetails
                };
            }
        }).mount('#app');
    </script>
</body>
</html>
